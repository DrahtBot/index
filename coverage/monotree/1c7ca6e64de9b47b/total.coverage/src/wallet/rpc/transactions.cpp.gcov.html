<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - total_coverage.info - src/wallet/rpc/transactions.cpp</title>
  <link rel="stylesheet" type="text/css" href="../../../gcov.css">
</head>

<body>

          <table width="100%" border=0 cellspacing=0 cellpadding=0>
            <tr><td class="title">LCOV - code coverage report</td></tr>
            <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>

            <tr>
              <td width="100%">
                <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="10%" class="headerValue"><a href="../../../index.html" title="Click to go to top-level">top level</a> - <a href="index.html" title="Click to go to directory src/wallet/rpc">src/wallet/rpc</a> - transactions.cpp<span style="font-size: 80%;"> (source / <a href="transactions.cpp.func-c.html" title="Click to go to function table">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="5%"></td>
            <td width="5%" class="headerCovTableHead">Coverage</td>
            <td width="5%" class="headerCovTableHead" title="Covered + Uncovered code">Total</td>
            <td width="5%" class="headerCovTableHead" title="Exercised code only">Hit</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">total_coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntryHi">96.1&nbsp;%</td>
            <td class="headerCovTableEntry">533</td>
            <td class="headerCovTableEntry">512</td>
          </tr>
          <tr>
            <td class="headerItem">Test Date:</td>
            <td class="headerValue">2024-10-28 14:00:11</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntryHi">95.7&nbsp;%</td>
            <td class="headerCovTableEntry">23</td>
            <td class="headerCovTableEntry">22</td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td class="headerItem">Branches:</td>
            <td class="headerCovTableEntryLo">53.8&nbsp;%</td>
            <td class="headerCovTableEntry">2327</td>
            <td class="headerCovTableEntry">1251</td>
          </tr>
                  <tr><td><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
                </table>
              </td>
            </tr>

            <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
          </table>

          <table cellpadding=0 cellspacing=0 border=0>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>
<pre class="sourceHeading">             Branch data     Line data    Source code</pre>
<pre class="source">
<span id="L1"><span class="lineNum">       1</span>                 :             : // Copyright (c) 2011-2022 The Bitcoin Core developers</span>
<span id="L2"><span class="lineNum">       2</span>                 :             : // Distributed under the MIT software license, see the accompanying</span>
<span id="L3"><span class="lineNum">       3</span>                 :             : // file COPYING or http://www.opensource.org/licenses/mit-license.php.</span>
<span id="L4"><span class="lineNum">       4</span>                 :             : </span>
<span id="L5"><span class="lineNum">       5</span>                 :             : #include &lt;core_io.h&gt;</span>
<span id="L6"><span class="lineNum">       6</span>                 :             : #include &lt;key_io.h&gt;</span>
<span id="L7"><span class="lineNum">       7</span>                 :             : #include &lt;policy/rbf.h&gt;</span>
<span id="L8"><span class="lineNum">       8</span>                 :             : #include &lt;rpc/util.h&gt;</span>
<span id="L9"><span class="lineNum">       9</span>                 :             : #include &lt;util/vector.h&gt;</span>
<span id="L10"><span class="lineNum">      10</span>                 :             : #include &lt;wallet/receive.h&gt;</span>
<span id="L11"><span class="lineNum">      11</span>                 :             : #include &lt;wallet/rpc/util.h&gt;</span>
<span id="L12"><span class="lineNum">      12</span>                 :             : #include &lt;wallet/wallet.h&gt;</span>
<span id="L13"><span class="lineNum">      13</span>                 :             : </span>
<span id="L14"><span class="lineNum">      14</span>                 :             : using interfaces::FoundBlock;</span>
<span id="L15"><span class="lineNum">      15</span>                 :             : </span>
<span id="L16"><span class="lineNum">      16</span>                 :             : namespace wallet {</span>
<span id="L17"><span class="lineNum">      17</span>                 :<span class="tlaGNC tlaBgGNC">        3914 : static void WalletTxToJSON(const CWallet&amp; wallet, const CWalletTx&amp; wtx, UniValue&amp; entry)</span></span>
<span id="L18"><span class="lineNum">      18</span>                 :             :     EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet)</span>
<span id="L19"><span class="lineNum">      19</span>                 :             : {</span>
<span id="L20"><span class="lineNum">      20</span>                 :<span class="tlaGNC">        3914 :     interfaces::Chain&amp; chain = wallet.chain();</span></span>
<span id="L21"><span class="lineNum">      21</span>                 :<span class="tlaGNC">        3914 :     int confirms = wallet.GetTxDepthInMainChain(wtx);</span></span>
<span id="L22"><span class="lineNum">      22</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        7828 :     entry.pushKV(&quot;confirmations&quot;, confirms);</span></span>
<span id="L23"><span class="lineNum">      23</span>         [<span class="tlaGBC" title="Branch 0 was taken 1908 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2006 times"> + </span>]:<span class="tlaGNC">        3914 :     if (wtx.IsCoinBase())</span></span>
<span id="L24"><span class="lineNum">      24</span>   [<span class="tlaGBC" title="Branch 0 was taken 1908 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1908 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        3816 :         entry.pushKV(&quot;generated&quot;, true);</span></span>
<span id="L25"><span class="lineNum">      25</span>         [<span class="tlaGBC" title="Branch 0 was taken 1235 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2679 times"> + </span>]:<span class="tlaGNC">        3914 :     if (auto* conf = wtx.state&lt;TxStateConfirmed&gt;())</span></span>
<span id="L26"><span class="lineNum">      26</span>                 :             :     {</span>
<span id="L27"><span class="lineNum">      27</span>   [<span class="tlaGBC" title="Branch 0 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        5358 :         entry.pushKV(&quot;blockhash&quot;, conf-&gt;confirmed_block_hash.GetHex());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L28"><span class="lineNum">      28</span>   [<span class="tlaGBC" title="Branch 0 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        5358 :         entry.pushKV(&quot;blockheight&quot;, conf-&gt;confirmed_block_height);</span></span>
<span id="L29"><span class="lineNum">      29</span>   [<span class="tlaGBC" title="Branch 0 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        5358 :         entry.pushKV(&quot;blockindex&quot;, conf-&gt;position_in_block);</span></span>
<span id="L30"><span class="lineNum">      30</span>                 :<span class="tlaGNC">        2679 :         int64_t block_time;</span></span>
<span id="L31"><span class="lineNum">      31</span>                 :<span class="tlaGNC">        2679 :         CHECK_NONFATAL(chain.findBlock(conf-&gt;confirmed_block_hash, FoundBlock().time(block_time)));</span></span>
<span id="L32"><span class="lineNum">      32</span>   [<span class="tlaGBC" title="Branch 0 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2679 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        5358 :         entry.pushKV(&quot;blocktime&quot;, block_time);</span></span>
<span id="L33"><span class="lineNum">      33</span>                 :             :     } else {</span>
<span id="L34"><span class="lineNum">      34</span>   [<span class="tlaGBC" title="Branch 0 was taken 1235 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1235 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        2470 :         entry.pushKV(&quot;trusted&quot;, CachedTxIsTrusted(wallet, wtx));</span></span>
<span id="L35"><span class="lineNum">      35</span>                 :             :     }</span>
<span id="L36"><span class="lineNum">      36</span>                 :<span class="tlaGNC">        3914 :     uint256 hash = wtx.GetHash();</span></span>
<span id="L37"><span class="lineNum">      37</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7828 :     entry.pushKV(&quot;txid&quot;, hash.GetHex());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L38"><span class="lineNum">      38</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7828 :     entry.pushKV(&quot;wtxid&quot;, wtx.GetWitnessHash().GetHex());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L39"><span class="lineNum">      39</span>                 :<span class="tlaGNC">        3914 :     UniValue conflicts(UniValue::VARR);</span></span>
<span id="L40"><span class="lineNum">      40</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 305 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 3914 times"> + </span>]:<span class="tlaGNC">        4219 :     for (const uint256&amp; conflict : wallet.GetTxConflicts(wtx))</span></span>
<span id="L41"><span class="lineNum">      41</span>   [<span class="tlaGBC" title="Branch 0 was taken 305 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 305 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         305 :         conflicts.push_back(conflict.GetHex());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 305 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L42"><span class="lineNum">      42</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        7828 :     entry.pushKV(&quot;walletconflicts&quot;, std::move(conflicts));</span></span>
<span id="L43"><span class="lineNum">      43</span>                 :<span class="tlaGNC">        3914 :     UniValue mempool_conflicts(UniValue::VARR);</span></span>
<span id="L44"><span class="lineNum">      44</span>         [<span class="tlaGBC" title="Branch 0 was taken 63 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 3914 times"> + </span>]:<span class="tlaGNC">        3977 :     for (const Txid&amp; mempool_conflict : wtx.mempool_conflicts)</span></span>
<span id="L45"><span class="lineNum">      45</span>   [<span class="tlaGBC" title="Branch 0 was taken 63 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 63 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">          63 :         mempool_conflicts.push_back(mempool_conflict.GetHex());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 63 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L46"><span class="lineNum">      46</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        7828 :     entry.pushKV(&quot;mempoolconflicts&quot;, std::move(mempool_conflicts));</span></span>
<span id="L47"><span class="lineNum">      47</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7828 :     entry.pushKV(&quot;time&quot;, wtx.GetTxTime());</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L48"><span class="lineNum">      48</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7828 :     entry.pushKV(&quot;timereceived&quot;, int64_t{wtx.nTimeReceived});</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L49"><span class="lineNum">      49</span>                 :             : </span>
<span id="L50"><span class="lineNum">      50</span>                 :             :     // Add opt-in RBF status</span>
<span id="L51"><span class="lineNum">      51</span>         [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3914 :     std::string rbfStatus = &quot;no&quot;;</span></span>
<span id="L52"><span class="lineNum">      52</span>         [<span class="tlaGBC" title="Branch 0 was taken 1235 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2679 times"> + </span>]:<span class="tlaGNC">        3914 :     if (confirms &lt;= 0) {</span></span>
<span id="L53"><span class="lineNum">      53</span>         [<span class="tlaGBC" title="Branch 0 was taken 1235 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1235 :         RBFTransactionState rbfState = chain.isRBFOptIn(*wtx.tx);</span></span>
<span id="L54"><span class="lineNum">      54</span>         [<span class="tlaGBC" title="Branch 0 was taken 420 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 815 times"> + </span>]:<span class="tlaGNC">        1235 :         if (rbfState == RBFTransactionState::UNKNOWN)</span></span>
<span id="L55"><span class="lineNum">      55</span>         [<span class="tlaGBC" title="Branch 0 was taken 420 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         420 :             rbfStatus = &quot;unknown&quot;;</span></span>
<span id="L56"><span class="lineNum">      56</span>         [<span class="tlaGBC" title="Branch 0 was taken 597 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 218 times"> + </span>]:<span class="tlaGNC">         815 :         else if (rbfState == RBFTransactionState::REPLACEABLE_BIP125)</span></span>
<span id="L57"><span class="lineNum">      57</span>         [<span class="tlaGBC" title="Branch 0 was taken 597 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         597 :             rbfStatus = &quot;yes&quot;;</span></span>
<span id="L58"><span class="lineNum">      58</span>                 :             :     }</span>
<span id="L59"><span class="lineNum">      59</span>   [<span class="tlaGBC" title="Branch 0 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7828 :     entry.pushKV(&quot;bip125-replaceable&quot;, rbfStatus);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 3914 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L60"><span class="lineNum">      60</span>                 :             : </span>
<span id="L61"><span class="lineNum">      61</span>         [<span class="tlaGBC" title="Branch 0 was taken 60 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 3914 times"> + </span>]:<span class="tlaGNC">        3974 :     for (const std::pair&lt;const std::string, std::string&gt;&amp; item : wtx.mapValue)</span></span>
<span id="L62"><span class="lineNum">      62</span>   [<span class="tlaGBC" title="Branch 0 was taken 60 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 60 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         120 :         entry.pushKV(item.first, item.second);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 60 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L63"><span class="lineNum">      63</span>                 :<span class="tlaGNC">        3914 : }</span></span>
<span id="L64"><span class="lineNum">      64</span>                 :             : </span>
<span id="L65"><span class="lineNum">      65</span>                 :<span class="tlaGNC">         457 : struct tallyitem</span></span>
<span id="L66"><span class="lineNum">      66</span>                 :             : {</span>
<span id="L67"><span class="lineNum">      67</span>                 :             :     CAmount nAmount{0};</span>
<span id="L68"><span class="lineNum">      68</span>                 :             :     int nConf{std::numeric_limits&lt;int&gt;::max()};</span>
<span id="L69"><span class="lineNum">      69</span>                 :             :     std::vector&lt;uint256&gt; txids;</span>
<span id="L70"><span class="lineNum">      70</span>                 :             :     bool fIsWatchonly{false};</span>
<span id="L71"><span class="lineNum">      71</span>                 :<span class="tlaGNC">         457 :     tallyitem() = default;</span></span>
<span id="L72"><span class="lineNum">      72</span>                 :             : };</span>
<span id="L73"><span class="lineNum">      73</span>                 :             : </span>
<span id="L74"><span class="lineNum">      74</span>                 :<span class="tlaGNC">         448 : static UniValue ListReceived(const CWallet&amp; wallet, const UniValue&amp; params, const bool by_label, const bool include_immature_coinbase) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet)</span></span>
<span id="L75"><span class="lineNum">      75</span>                 :             : {</span>
<span id="L76"><span class="lineNum">      76</span>                 :             :     // Minimum confirmations</span>
<span id="L77"><span class="lineNum">      77</span>                 :<span class="tlaGNC">         448 :     int nMinDepth = 1;</span></span>
<span id="L78"><span class="lineNum">      78</span>         [<span class="tlaGBC" title="Branch 0 was taken 414 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 34 times"> + </span>]:<span class="tlaGNC">         448 :     if (!params[0].isNull())</span></span>
<span id="L79"><span class="lineNum">      79</span>                 :<span class="tlaGNC">         414 :         nMinDepth = params[0].getInt&lt;int&gt;();</span></span>
<span id="L80"><span class="lineNum">      80</span>                 :             : </span>
<span id="L81"><span class="lineNum">      81</span>                 :             :     // Whether to include empty labels</span>
<span id="L82"><span class="lineNum">      82</span>                 :<span class="tlaGNC">         448 :     bool fIncludeEmpty = false;</span></span>
<span id="L83"><span class="lineNum">      83</span>         [<span class="tlaGBC" title="Branch 0 was taken 24 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 424 times"> + </span>]:<span class="tlaGNC">         448 :     if (!params[1].isNull())</span></span>
<span id="L84"><span class="lineNum">      84</span>                 :<span class="tlaGNC">          24 :         fIncludeEmpty = params[1].get_bool();</span></span>
<span id="L85"><span class="lineNum">      85</span>                 :             : </span>
<span id="L86"><span class="lineNum">      86</span>                 :<span class="tlaGNC">         448 :     isminefilter filter = ISMINE_SPENDABLE;</span></span>
<span id="L87"><span class="lineNum">      87</span>                 :             : </span>
<span id="L88"><span class="lineNum">      88</span>         [<span class="tlaGBC" title="Branch 0 was taken 400 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 48 times"> + </span>]:<span class="tlaGNC">         448 :     if (ParseIncludeWatchonly(params[2], wallet)) {</span></span>
<span id="L89"><span class="lineNum">      89</span>                 :<span class="tlaGNC">         400 :         filter |= ISMINE_WATCH_ONLY;</span></span>
<span id="L90"><span class="lineNum">      90</span>                 :             :     }</span>
<span id="L91"><span class="lineNum">      91</span>                 :             : </span>
<span id="L92"><span class="lineNum">      92</span>                 :<span class="tlaGNC">         448 :     std::optional&lt;CTxDestination&gt; filtered_address{std::nullopt};</span></span>
<span id="L93"><span class="lineNum">      93</span>   [<span class="tlaGBC" title="Branch 0 was taken 426 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 22 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 426 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         448 :     if (!by_label &amp;&amp; !params[3].isNull() &amp;&amp; !params[3].get_str().empty()) {</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 394 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 32 times"> + </span><span class="tlaGBC" title="Branch 6 was taken 394 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 394 times"> + </span> 
<span class="lineNum">        </span>       <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 394 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span>]
<span id="L94"><span class="lineNum">      94</span>   [<span class="tlaGBC" title="Branch 0 was taken 394 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 394 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         394 :         if (!IsValidDestinationString(params[3].get_str())) {</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 394 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 7 was taken 392 times"> + </span>]
<span id="L95"><span class="lineNum">      95</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :             throw JSONRPCError(RPC_WALLET_ERROR, &quot;address_filter parameter was invalid&quot;);</span></span>
<span id="L96"><span class="lineNum">      96</span>                 :             :         }</span>
<span id="L97"><span class="lineNum">      97</span>   [<span class="tlaGBC" title="Branch 0 was taken 392 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 392 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         392 :         filtered_address = DecodeDestination(params[3].get_str());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 392 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L98"><span class="lineNum">      98</span>                 :             :     }</span>
<span id="L99"><span class="lineNum">      99</span>                 :             : </span>
<span id="L100"><span class="lineNum">     100</span>                 :             :     // Tally</span>
<span id="L101"><span class="lineNum">     101</span>                 :<span class="tlaGNC">         446 :     std::map&lt;CTxDestination, tallyitem&gt; mapTally;</span></span>
<span id="L102"><span class="lineNum">     102</span>         [<span class="tlaGBC" title="Branch 0 was taken 24372 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 446 times"> + </span>]:<span class="tlaGNC">       24818 :     for (const std::pair&lt;const uint256, CWalletTx&gt;&amp; pairWtx : wallet.mapWallet) {</span></span>
<span id="L103"><span class="lineNum">     103</span>                 :<span class="tlaGNC">       24372 :         const CWalletTx&amp; wtx = pairWtx.second;</span></span>
<span id="L104"><span class="lineNum">     104</span>                 :             : </span>
<span id="L105"><span class="lineNum">     105</span>         [<span class="tlaGBC" title="Branch 0 was taken 24372 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">       24372 :         int nDepth = wallet.GetTxDepthInMainChain(wtx);</span></span>
<span id="L106"><span class="lineNum">     106</span>         [<span class="tlaGBC" title="Branch 0 was taken 34 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 24338 times"> + </span>]:<span class="tlaGNC">       24372 :         if (nDepth &lt; nMinDepth)</span></span>
<span id="L107"><span class="lineNum">     107</span>                 :<span class="tlaGNC">          34 :             continue;</span></span>
<span id="L108"><span class="lineNum">     108</span>                 :             : </span>
<span id="L109"><span class="lineNum">     109</span>                 :             :         // Coinbase with less than 1 confirmation is no longer in the main chain</span>
<span id="L110"><span class="lineNum">     110</span>   [<span class="tlaGBC" title="Branch 0 was taken 11022 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 13316 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 10618 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 404 times"> + </span>]:<span class="tlaGNC">       24338 :         if ((wtx.IsCoinBase() &amp;&amp; (nDepth &lt; 1))</span></span>
<span id="L111"><span class="lineNum">     111</span>   [<span class="tlaGBC" title="Branch 0 was taken 11022 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 13316 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 23934 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       34956 :             || (wallet.IsTxImmatureCoinBase(wtx) &amp;&amp; !include_immature_coinbase)) {</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 5281 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 18653 times"> + </span><span class="tlaGBC" title="Branch 6 was taken 5261 times"> + </span><span class="tlaGBC" title="Branch 7 was taken 20 times"> + </span>]
<span id="L112"><span class="lineNum">     112</span>                 :<span class="tlaGNC">        5665 :             continue;</span></span>
<span id="L113"><span class="lineNum">     113</span>                 :             :         }</span>
<span id="L114"><span class="lineNum">     114</span>                 :             : </span>
<span id="L115"><span class="lineNum">     115</span>         [<span class="tlaGBC" title="Branch 0 was taken 36966 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 18673 times"> + </span>]:<span class="tlaGNC">       55639 :         for (const CTxOut&amp; txout : wtx.tx-&gt;vout) {</span></span>
<span id="L116"><span class="lineNum">     116</span>                 :<span class="tlaGNC">       36966 :             CTxDestination address;</span></span>
<span id="L117"><span class="lineNum">     117</span>   [<span class="tlaGBC" title="Branch 0 was taken 36966 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 5357 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 31609 times"> + </span>]:<span class="tlaGNC">       36966 :             if (!ExtractDestination(txout.scriptPubKey, address))</span></span>
<span id="L118"><span class="lineNum">     118</span>                 :<span class="tlaGNC">        5357 :                 continue;</span></span>
<span id="L119"><span class="lineNum">     119</span>                 :             : </span>
<span id="L120"><span class="lineNum">     120</span>   [<span class="tlaGBC" title="Branch 0 was taken 29745 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 1864 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 311 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 29434 times"> + </span>]:<span class="tlaGNC">       31609 :             if (filtered_address &amp;&amp; !(filtered_address == address)) {</span></span>
<span id="L121"><span class="lineNum">     121</span>                 :<span class="tlaGNC">       29434 :                 continue;</span></span>
<span id="L122"><span class="lineNum">     122</span>                 :             :             }</span>
<span id="L123"><span class="lineNum">     123</span>                 :             : </span>
<span id="L124"><span class="lineNum">     124</span>         [<span class="tlaGBC" title="Branch 0 was taken 2175 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2175 :             isminefilter mine = wallet.IsMine(address);</span></span>
<span id="L125"><span class="lineNum">     125</span>         [<span class="tlaGBC" title="Branch 0 was taken 120 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2055 times"> + </span>]:<span class="tlaGNC">        2175 :             if (!(mine &amp; filter))</span></span>
<span id="L126"><span class="lineNum">     126</span>                 :<span class="tlaGNC">         120 :                 continue;</span></span>
<span id="L127"><span class="lineNum">     127</span>                 :             : </span>
<span id="L128"><span class="lineNum">     128</span>         [<span class="tlaGBC" title="Branch 0 was taken 2055 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2055 :             tallyitem&amp; item = mapTally[address];</span></span>
<span id="L129"><span class="lineNum">     129</span>                 :<span class="tlaGNC">        2055 :             item.nAmount += txout.nValue;</span></span>
<span id="L130"><span class="lineNum">     130</span>         [<span class="tlaGBC" title="Branch 0 was taken 1556 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 499 times"> + </span>]:<span class="tlaGNC">        2055 :             item.nConf = std::min(item.nConf, nDepth);</span></span>
<span id="L131"><span class="lineNum">     131</span>         [<span class="tlaGBC" title="Branch 0 was taken 2055 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2055 :             item.txids.push_back(wtx.GetHash());</span></span>
<span id="L132"><span class="lineNum">     132</span>         [<span class="tlaGBC" title="Branch 0 was taken 202 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 1853 times"> + </span>]:<span class="tlaGNC">        2055 :             if (mine &amp; ISMINE_WATCH_ONLY)</span></span>
<span id="L133"><span class="lineNum">     133</span>                 :<span class="tlaGNC">         202 :                 item.fIsWatchonly = true;</span></span>
<span id="L134"><span class="lineNum">     134</span>                 :<span class="tlaGNC">       36966 :         }</span></span>
<span id="L135"><span class="lineNum">     135</span>                 :             :     }</span>
<span id="L136"><span class="lineNum">     136</span>                 :             : </span>
<span id="L137"><span class="lineNum">     137</span>                 :             :     // Reply</span>
<span id="L138"><span class="lineNum">     138</span>                 :<span class="tlaGNC">         446 :     UniValue ret(UniValue::VARR);</span></span>
<span id="L139"><span class="lineNum">     139</span>         [<span class="tlaGBC" title="Branch 0 was taken 392 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 54 times"> + </span>]:<span class="tlaGNC">         446 :     std::map&lt;std::string, tallyitem&gt; label_tally;</span></span>
<span id="L140"><span class="lineNum">     140</span>                 :             : </span>
<span id="L141"><span class="lineNum">     141</span>                 :<span class="tlaGNC">        1124 :     const auto&amp; func = [&amp;](const CTxDestination&amp; address, const std::string&amp; label, bool is_change, const std::optional&lt;AddressPurpose&gt;&amp; purpose) {</span></span>
<span id="L142"><span class="lineNum">     142</span>         [<span class="tlaGBC" title="Branch 0 was taken 678 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         678 :         if (is_change) return; // no change addresses</span></span>
<span id="L143"><span class="lineNum">     143</span>                 :             : </span>
<span id="L144"><span class="lineNum">     144</span>                 :<span class="tlaGNC">         678 :         auto it = mapTally.find(address);</span></span>
<span id="L145"><span class="lineNum">     145</span>   [<span class="tlaGBC" title="Branch 0 was taken 325 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 353 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 32 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 293 times"> + </span>]:<span class="tlaGNC">         678 :         if (it == mapTally.end() &amp;&amp; !fIncludeEmpty)</span></span>
<span id="L146"><span class="lineNum">     146</span>                 :             :             return;</span>
<span id="L147"><span class="lineNum">     147</span>                 :             : </span>
<span id="L148"><span class="lineNum">     148</span>                 :<span class="tlaGNC">         385 :         CAmount nAmount = 0;</span></span>
<span id="L149"><span class="lineNum">     149</span>                 :<span class="tlaGNC">         385 :         int nConf = std::numeric_limits&lt;int&gt;::max();</span></span>
<span id="L150"><span class="lineNum">     150</span>                 :<span class="tlaGNC">         385 :         bool fIsWatchonly = false;</span></span>
<span id="L151"><span class="lineNum">     151</span>         [<span class="tlaGBC" title="Branch 0 was taken 353 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 32 times"> + </span>]:<span class="tlaGNC">         385 :         if (it != mapTally.end()) {</span></span>
<span id="L152"><span class="lineNum">     152</span>                 :<span class="tlaGNC">         353 :             nAmount = (*it).second.nAmount;</span></span>
<span id="L153"><span class="lineNum">     153</span>                 :<span class="tlaGNC">         353 :             nConf = (*it).second.nConf;</span></span>
<span id="L154"><span class="lineNum">     154</span>                 :<span class="tlaGNC">         353 :             fIsWatchonly = (*it).second.fIsWatchonly;</span></span>
<span id="L155"><span class="lineNum">     155</span>                 :             :         }</span>
<span id="L156"><span class="lineNum">     156</span>                 :             : </span>
<span id="L157"><span class="lineNum">     157</span>         [<span class="tlaGBC" title="Branch 0 was taken 60 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 325 times"> + </span>]:<span class="tlaGNC">         385 :         if (by_label) {</span></span>
<span id="L158"><span class="lineNum">     158</span>                 :<span class="tlaGNC">          60 :             tallyitem&amp; _item = label_tally[label];</span></span>
<span id="L159"><span class="lineNum">     159</span>                 :<span class="tlaGNC">          60 :             _item.nAmount += nAmount;</span></span>
<span id="L160"><span class="lineNum">     160</span>         [<span class="tlaGBC" title="Branch 0 was taken 18 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 42 times"> + </span>]:<span class="tlaGNC">          60 :             _item.nConf = std::min(_item.nConf, nConf);</span></span>
<span id="L161"><span class="lineNum">     161</span>                 :<span class="tlaGNC">          60 :             _item.fIsWatchonly = fIsWatchonly;</span></span>
<span id="L162"><span class="lineNum">     162</span>                 :             :         } else {</span>
<span id="L163"><span class="lineNum">     163</span>                 :<span class="tlaGNC">         325 :             UniValue obj(UniValue::VOBJ);</span></span>
<span id="L164"><span class="lineNum">     164</span>   [<span class="tlaGBC" title="Branch 0 was taken 164 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 161 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 164 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         489 :             if (fIsWatchonly) obj.pushKV(&quot;involvesWatchonly&quot;, true);</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 164 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 164 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L165"><span class="lineNum">     165</span>   [<span class="tlaGBC" title="Branch 0 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         650 :             obj.pushKV(&quot;address&quot;,       EncodeDestination(address));</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L166"><span class="lineNum">     166</span>   [<span class="tlaGBC" title="Branch 0 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         650 :             obj.pushKV(&quot;amount&quot;,        ValueFromAmount(nAmount));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L167"><span class="lineNum">     167</span>   [<span class="tlaGBC" title="Branch 0 was taken 303 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 22 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         953 :             obj.pushKV(&quot;confirmations&quot;, (nConf == std::numeric_limits&lt;int&gt;::max() ? 0 : nConf));</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L168"><span class="lineNum">     168</span>   [<span class="tlaGBC" title="Branch 0 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         650 :             obj.pushKV(&quot;label&quot;, label);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L169"><span class="lineNum">     169</span>                 :<span class="tlaGNC">         325 :             UniValue transactions(UniValue::VARR);</span></span>
<span id="L170"><span class="lineNum">     170</span>         [<span class="tlaGBC" title="Branch 0 was taken 303 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 22 times"> + </span>]:<span class="tlaGNC">         325 :             if (it != mapTally.end()) {</span></span>
<span id="L171"><span class="lineNum">     171</span>         [<span class="tlaGBC" title="Branch 0 was taken 1263 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 303 times"> + </span>]:<span class="tlaGNC">        1566 :                 for (const uint256&amp; _item : (*it).second.txids) {</span></span>
<span id="L172"><span class="lineNum">     172</span>   [<span class="tlaGBC" title="Branch 0 was taken 1263 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1263 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        1263 :                     transactions.push_back(_item.GetHex());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1263 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L173"><span class="lineNum">     173</span>                 :             :                 }</span>
<span id="L174"><span class="lineNum">     174</span>                 :             :             }</span>
<span id="L175"><span class="lineNum">     175</span>   [<span class="tlaGBC" title="Branch 0 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">         650 :             obj.pushKV(&quot;txids&quot;, std::move(transactions));</span></span>
<span id="L176"><span class="lineNum">     176</span>         [<span class="tlaGBC" title="Branch 0 was taken 325 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         325 :             ret.push_back(std::move(obj));</span></span>
<span id="L177"><span class="lineNum">     177</span>                 :<span class="tlaGNC">         325 :         }</span></span>
<span id="L178"><span class="lineNum">     178</span>                 :<span class="tlaGNC">         446 :     };</span></span>
<span id="L179"><span class="lineNum">     179</span>                 :             : </span>
<span id="L180"><span class="lineNum">     180</span>         [<span class="tlaGBC" title="Branch 0 was taken 392 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 54 times"> + </span>]:<span class="tlaGNC">         446 :     if (filtered_address) {</span></span>
<span id="L181"><span class="lineNum">     181</span>         [<span class="tlaGBC" title="Branch 0 was taken 392 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         392 :         const auto&amp; entry = wallet.FindAddressBookEntry(*filtered_address, /*allow_change=*/false);</span></span>
<span id="L182"><span class="lineNum">     182</span>   [<span class="tlaGBC" title="Branch 0 was taken 390 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 390 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         782 :         if (entry) func(*filtered_address, entry-&gt;GetLabel(), entry-&gt;IsChange(), entry-&gt;purpose);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 390 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L183"><span class="lineNum">     183</span>                 :             :     } else {</span>
<span id="L184"><span class="lineNum">     184</span>                 :             :         // No filtered addr, walk-through the addressbook entry</span>
<span id="L185"><span class="lineNum">     185</span>   [<span class="tlaGBC" title="Branch 0 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">         108 :         wallet.ForEachAddrBookEntry(func);</span></span>
<span id="L186"><span class="lineNum">     186</span>                 :             :     }</span>
<span id="L187"><span class="lineNum">     187</span>                 :             : </span>
<span id="L188"><span class="lineNum">     188</span>         [<span class="tlaGBC" title="Branch 0 was taken 22 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 424 times"> + </span>]:<span class="tlaGNC">         446 :     if (by_label) {</span></span>
<span id="L189"><span class="lineNum">     189</span>         [<span class="tlaGBC" title="Branch 0 was taken 36 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 22 times"> + </span>]:<span class="tlaGNC">          58 :         for (const auto&amp; entry : label_tally) {</span></span>
<span id="L190"><span class="lineNum">     190</span>                 :<span class="tlaGNC">          36 :             CAmount nAmount = entry.second.nAmount;</span></span>
<span id="L191"><span class="lineNum">     191</span>                 :<span class="tlaGNC">          36 :             int nConf = entry.second.nConf;</span></span>
<span id="L192"><span class="lineNum">     192</span>                 :<span class="tlaGNC">          36 :             UniValue obj(UniValue::VOBJ);</span></span>
<span id="L193"><span class="lineNum">     193</span>         [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 34 times"> + </span>]:<span class="tlaGNC">          36 :             if (entry.second.fIsWatchonly)</span></span>
<span id="L194"><span class="lineNum">     194</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">           4 :                 obj.pushKV(&quot;involvesWatchonly&quot;, true);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L195"><span class="lineNum">     195</span>   [<span class="tlaGBC" title="Branch 0 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">          72 :             obj.pushKV(&quot;amount&quot;,        ValueFromAmount(nAmount));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L196"><span class="lineNum">     196</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 34 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">          74 :             obj.pushKV(&quot;confirmations&quot;, (nConf == std::numeric_limits&lt;int&gt;::max() ? 0 : nConf));</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L197"><span class="lineNum">     197</span>   [<span class="tlaGBC" title="Branch 0 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">          72 :             obj.pushKV(&quot;label&quot;,         entry.first);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L198"><span class="lineNum">     198</span>         [<span class="tlaGBC" title="Branch 0 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          36 :             ret.push_back(std::move(obj));</span></span>
<span id="L199"><span class="lineNum">     199</span>                 :<span class="tlaGNC">          36 :         }</span></span>
<span id="L200"><span class="lineNum">     200</span>                 :             :     }</span>
<span id="L201"><span class="lineNum">     201</span>                 :             : </span>
<span id="L202"><span class="lineNum">     202</span>                 :<span class="tlaGNC">         446 :     return ret;</span></span>
<span id="L203"><span class="lineNum">     203</span>                 :<span class="tlaGNC">         446 : }</span></span>
<span id="L204"><span class="lineNum">     204</span>                 :             : </span>
<span id="L205"><span class="lineNum">     205</span>                 :<span class="tlaGNC">        1588 : RPCHelpMan listreceivedbyaddress()</span></span>
<span id="L206"><span class="lineNum">     206</span>                 :             : {</span>
<span id="L207"><span class="lineNum">     207</span>                 :<span class="tlaGNC">        1588 :     return RPCHelpMan{&quot;listreceivedbyaddress&quot;,</span></span>
<span id="L208"><span class="lineNum">     208</span>                 :             :                 &quot;\nList balances by receiving address.\n&quot;,</span>
<span id="L209"><span class="lineNum">     209</span>                 :             :                 {</span>
<span id="L210"><span class="lineNum">     210</span>         [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3176 :                     {&quot;minconf&quot;, RPCArg::Type::NUM, RPCArg::Default{1}, &quot;The minimum number of confirmations before payments are included.&quot;},</span></span>
<span id="L211"><span class="lineNum">     211</span>         [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3176 :                     {&quot;include_empty&quot;, RPCArg::Type::BOOL, RPCArg::Default{false}, &quot;Whether to include addresses that haven't received any payments.&quot;},</span></span>
<span id="L212"><span class="lineNum">     212</span>         [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3176 :                     {&quot;include_watchonly&quot;, RPCArg::Type::BOOL, RPCArg::DefaultHint{&quot;true for watch-only wallets, otherwise false&quot;}, &quot;Whether to include watch-only addresses (see 'importaddress')&quot;},</span></span>
<span id="L213"><span class="lineNum">     213</span>         [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1588 :                     {&quot;address_filter&quot;, RPCArg::Type::STR, RPCArg::Optional::OMITTED, &quot;If present and non-empty, only return information on this address.&quot;},</span></span>
<span id="L214"><span class="lineNum">     214</span>         [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3176 :                     {&quot;include_immature_coinbase&quot;, RPCArg::Type::BOOL, RPCArg::Default{false}, &quot;Include immature coinbase transactions.&quot;},</span></span>
<span id="L215"><span class="lineNum">     215</span>                 :             :                 },</span>
<span id="L216"><span class="lineNum">     216</span>                 :<span class="tlaUNC tlaBgUNC">           0 :                 RPCResult{</span></span>
<span id="L217"><span class="lineNum">     217</span>                 :             :                     RPCResult::Type::ARR, &quot;&quot;, &quot;&quot;,</span>
<span id="L218"><span class="lineNum">     218</span>                 :             :                     {</span>
<span id="L219"><span class="lineNum">     219</span>                 :             :                         {RPCResult::Type::OBJ, &quot;&quot;, &quot;&quot;,</span>
<span id="L220"><span class="lineNum">     220</span>                 :             :                         {</span>
<span id="L221"><span class="lineNum">     221</span>                 :             :                             {RPCResult::Type::BOOL, &quot;involvesWatchonly&quot;, /*optional=*/true, &quot;Only returns true if imported addresses were involved in transaction&quot;},</span>
<span id="L222"><span class="lineNum">     222</span>                 :             :                             {RPCResult::Type::STR, &quot;address&quot;, &quot;The receiving address&quot;},</span>
<span id="L223"><span class="lineNum">     223</span>         [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC tlaBgGNC">        3176 :                             {RPCResult::Type::STR_AMOUNT, &quot;amount&quot;, &quot;The total amount in &quot; + CURRENCY_UNIT + &quot; received by the address&quot;},</span></span>
<span id="L224"><span class="lineNum">     224</span>                 :             :                             {RPCResult::Type::NUM, &quot;confirmations&quot;, &quot;The number of confirmations of the most recent transaction included&quot;},</span>
<span id="L225"><span class="lineNum">     225</span>                 :             :                             {RPCResult::Type::STR, &quot;label&quot;, &quot;The label of the receiving address. The default label is \&quot;\&quot;&quot;},</span>
<span id="L226"><span class="lineNum">     226</span>                 :             :                             {RPCResult::Type::ARR, &quot;txids&quot;, &quot;&quot;,</span>
<span id="L227"><span class="lineNum">     227</span>                 :             :                             {</span>
<span id="L228"><span class="lineNum">     228</span>                 :             :                                 {RPCResult::Type::STR_HEX, &quot;txid&quot;, &quot;The ids of transactions received with the address&quot;},</span>
<span id="L229"><span class="lineNum">     229</span>                 :             :                             }},</span>
<span id="L230"><span class="lineNum">     230</span>                 :             :                         }},</span>
<span id="L231"><span class="lineNum">     231</span>                 :             :                     }</span>
<span id="L232"><span class="lineNum">     232</span>   [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       22232 :                 },</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 39 was not taken"> - </span><span class="tlaGBC" title="Branch 40 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 41 was not taken"> - </span><span class="tlaGBC" title="Branch 42 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 44 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaGBC" title="Branch 46 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span><span class="tlaGBC" title="Branch 48 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 49 was not taken"> - </span><span class="tlaGBC" title="Branch 50 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 51 was not taken"> - </span><span class="tlaGBC" title="Branch 52 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 53 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 54 was taken 1588 times"> + </span><span class="tlaGBC" title="Branch 55 was taken 1588 times"> + </span><span class="tlaGBC" title="Branch 56 was taken 9528 times"> + </span><span class="tlaGBC" title="Branch 57 was taken 1588 times"> + </span><span class="tlaGBC" title="Branch 58 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 59 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 60 was not taken"> - </span><span class="tlaUNC" title="Branch 61 was not taken"> - </span><span class="tlaUNC" title="Branch 62 was not taken"> - </span><span class="tlaUNC" title="Branch 63 was not taken"> - </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 64 was not taken"> - </span><span class="tlaUNC" title="Branch 65 was not taken"> - </span>]
<span id="L233"><span class="lineNum">     233</span>                 :<span class="tlaGNC">        1588 :                 RPCExamples{</span></span>
<span id="L234"><span class="lineNum">     234</span>   [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        3176 :                     HelpExampleCli(&quot;listreceivedbyaddress&quot;, &quot;&quot;)</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L235"><span class="lineNum">     235</span>   [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        6352 :             + HelpExampleCli(&quot;listreceivedbyaddress&quot;, &quot;6 true&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L236"><span class="lineNum">     236</span>   [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        6352 :             + HelpExampleCli(&quot;listreceivedbyaddress&quot;, &quot;6 true true \&quot;\&quot; true&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L237"><span class="lineNum">     237</span>   [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        6352 :             + HelpExampleRpc(&quot;listreceivedbyaddress&quot;, &quot;6, true, true&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L238"><span class="lineNum">     238</span>   [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7940 :             + HelpExampleRpc(&quot;listreceivedbyaddress&quot;, &quot;6, true, true, \&quot;&quot; + EXAMPLE_ADDRESS[0] + &quot;\&quot;, true&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L239"><span class="lineNum">     239</span>         [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1588 :                 },</span></span>
<span id="L240"><span class="lineNum">     240</span>                 :<span class="tlaGNC">         426 :         [&amp;](const RPCHelpMan&amp; self, const JSONRPCRequest&amp; request) -&gt; UniValue</span></span>
<span id="L241"><span class="lineNum">     241</span>                 :             : {</span>
<span id="L242"><span class="lineNum">     242</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 426 times"> + </span>]:<span class="tlaGNC">         426 :     const std::shared_ptr&lt;const CWallet&gt; pwallet = GetWalletForJSONRPCRequest(request);</span></span>
<span id="L243"><span class="lineNum">     243</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 426 times"> + </span>]:<span class="tlaGNC">         426 :     if (!pwallet) return UniValue::VNULL;</span></span>
<span id="L244"><span class="lineNum">     244</span>                 :             : </span>
<span id="L245"><span class="lineNum">     245</span>                 :             :     // Make sure the results are valid at least up to the most recent block</span>
<span id="L246"><span class="lineNum">     246</span>                 :             :     // the user could have gotten from another RPC command prior to now</span>
<span id="L247"><span class="lineNum">     247</span>         [<span class="tlaGBC" title="Branch 0 was taken 426 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         426 :     pwallet-&gt;BlockUntilSyncedToCurrentChain();</span></span>
<span id="L248"><span class="lineNum">     248</span>                 :             : </span>
<span id="L249"><span class="lineNum">     249</span>   [<span class="tlaGBC" title="Branch 0 was taken 426 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 422 times"> + </span> :<span class="tlaGNC">         426 :     const bool include_immature_coinbase{request.params[4].isNull() ? false : request.params[4].get_bool()};</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L250"><span class="lineNum">     250</span>                 :             : </span>
<span id="L251"><span class="lineNum">     251</span>         [<span class="tlaGBC" title="Branch 0 was taken 426 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         426 :     LOCK(pwallet-&gt;cs_wallet);</span></span>
<span id="L252"><span class="lineNum">     252</span>                 :             : </span>
<span id="L253"><span class="lineNum">     253</span>         [<span class="tlaGBC" title="Branch 0 was taken 424 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span>]:<span class="tlaGNC">         426 :     return ListReceived(*pwallet, request.params, false, include_immature_coinbase);</span></span>
<span id="L254"><span class="lineNum">     254</span>                 :<span class="tlaGNC">         850 : },</span></span>
<span id="L255"><span class="lineNum">     255</span>   [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       46052 :     };</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 7940 times"> + </span> 
<span class="lineNum">        </span>       <span class="tlaGBC" title="Branch 29 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 30 was not taken"> - </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span>]
<span id="L256"><span class="lineNum">     256</span>   [<span class="tlaGBC" title="Branch 0 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       31760 : }</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1588 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1588 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1588 times"> + </span> 
<span class="lineNum">        </span>    <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaUNC" title="Branch 30 was not taken"> - </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaUNC" title="Branch 32 was not taken"> - </span> 
<span class="lineNum">        </span>             <span class="tlaUNC" title="Branch 33 was not taken"> - </span>]
<span id="L257"><span class="lineNum">     257</span>                 :             : </span>
<span id="L258"><span class="lineNum">     258</span>                 :<span class="tlaGNC">        1184 : RPCHelpMan listreceivedbylabel()</span></span>
<span id="L259"><span class="lineNum">     259</span>                 :             : {</span>
<span id="L260"><span class="lineNum">     260</span>                 :<span class="tlaGNC">        1184 :     return RPCHelpMan{&quot;listreceivedbylabel&quot;,</span></span>
<span id="L261"><span class="lineNum">     261</span>                 :             :                 &quot;\nList received transactions by label.\n&quot;,</span>
<span id="L262"><span class="lineNum">     262</span>                 :             :                 {</span>
<span id="L263"><span class="lineNum">     263</span>         [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2368 :                     {&quot;minconf&quot;, RPCArg::Type::NUM, RPCArg::Default{1}, &quot;The minimum number of confirmations before payments are included.&quot;},</span></span>
<span id="L264"><span class="lineNum">     264</span>         [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2368 :                     {&quot;include_empty&quot;, RPCArg::Type::BOOL, RPCArg::Default{false}, &quot;Whether to include labels that haven't received any payments.&quot;},</span></span>
<span id="L265"><span class="lineNum">     265</span>         [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2368 :                     {&quot;include_watchonly&quot;, RPCArg::Type::BOOL, RPCArg::DefaultHint{&quot;true for watch-only wallets, otherwise false&quot;}, &quot;Whether to include watch-only addresses (see 'importaddress')&quot;},</span></span>
<span id="L266"><span class="lineNum">     266</span>         [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2368 :                     {&quot;include_immature_coinbase&quot;, RPCArg::Type::BOOL, RPCArg::Default{false}, &quot;Include immature coinbase transactions.&quot;},</span></span>
<span id="L267"><span class="lineNum">     267</span>                 :             :                 },</span>
<span id="L268"><span class="lineNum">     268</span>                 :<span class="tlaUNC tlaBgUNC">           0 :                 RPCResult{</span></span>
<span id="L269"><span class="lineNum">     269</span>                 :             :                     RPCResult::Type::ARR, &quot;&quot;, &quot;&quot;,</span>
<span id="L270"><span class="lineNum">     270</span>                 :             :                     {</span>
<span id="L271"><span class="lineNum">     271</span>                 :             :                         {RPCResult::Type::OBJ, &quot;&quot;, &quot;&quot;,</span>
<span id="L272"><span class="lineNum">     272</span>                 :             :                         {</span>
<span id="L273"><span class="lineNum">     273</span>                 :             :                             {RPCResult::Type::BOOL, &quot;involvesWatchonly&quot;, /*optional=*/true, &quot;Only returns true if imported addresses were involved in transaction&quot;},</span>
<span id="L274"><span class="lineNum">     274</span>                 :             :                             {RPCResult::Type::STR_AMOUNT, &quot;amount&quot;, &quot;The total amount received by addresses with this label&quot;},</span>
<span id="L275"><span class="lineNum">     275</span>                 :             :                             {RPCResult::Type::NUM, &quot;confirmations&quot;, &quot;The number of confirmations of the most recent transaction included&quot;},</span>
<span id="L276"><span class="lineNum">     276</span>                 :             :                             {RPCResult::Type::STR, &quot;label&quot;, &quot;The label of the receiving address. The default label is \&quot;\&quot;&quot;},</span>
<span id="L277"><span class="lineNum">     277</span>                 :             :                         }},</span>
<span id="L278"><span class="lineNum">     278</span>                 :             :                     }</span>
<span id="L279"><span class="lineNum">     279</span>   [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC tlaBgGNC">        9472 :                 },</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1184 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1184 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1184 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 1184 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 39 was taken 1184 times"> + </span><span class="tlaGBC" title="Branch 40 was taken 4736 times"> + </span><span class="tlaGBC" title="Branch 41 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 42 was not taken"> - </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 44 was not taken"> - </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span>]
<span id="L280"><span class="lineNum">     280</span>                 :<span class="tlaGNC">        1184 :                 RPCExamples{</span></span>
<span id="L281"><span class="lineNum">     281</span>   [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2368 :                     HelpExampleCli(&quot;listreceivedbylabel&quot;, &quot;&quot;)</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L282"><span class="lineNum">     282</span>   [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        4736 :             + HelpExampleCli(&quot;listreceivedbylabel&quot;, &quot;6 true&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L283"><span class="lineNum">     283</span>   [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        4736 :             + HelpExampleRpc(&quot;listreceivedbylabel&quot;, &quot;6, true, true, true&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L284"><span class="lineNum">     284</span>         [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1184 :                 },</span></span>
<span id="L285"><span class="lineNum">     285</span>                 :<span class="tlaGNC">          22 :         [&amp;](const RPCHelpMan&amp; self, const JSONRPCRequest&amp; request) -&gt; UniValue</span></span>
<span id="L286"><span class="lineNum">     286</span>                 :             : {</span>
<span id="L287"><span class="lineNum">     287</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 22 times"> + </span>]:<span class="tlaGNC">          22 :     const std::shared_ptr&lt;const CWallet&gt; pwallet = GetWalletForJSONRPCRequest(request);</span></span>
<span id="L288"><span class="lineNum">     288</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 22 times"> + </span>]:<span class="tlaGNC">          22 :     if (!pwallet) return UniValue::VNULL;</span></span>
<span id="L289"><span class="lineNum">     289</span>                 :             : </span>
<span id="L290"><span class="lineNum">     290</span>                 :             :     // Make sure the results are valid at least up to the most recent block</span>
<span id="L291"><span class="lineNum">     291</span>                 :             :     // the user could have gotten from another RPC command prior to now</span>
<span id="L292"><span class="lineNum">     292</span>         [<span class="tlaGBC" title="Branch 0 was taken 22 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          22 :     pwallet-&gt;BlockUntilSyncedToCurrentChain();</span></span>
<span id="L293"><span class="lineNum">     293</span>                 :             : </span>
<span id="L294"><span class="lineNum">     294</span>   [<span class="tlaGBC" title="Branch 0 was taken 22 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 18 times"> + </span> :<span class="tlaGNC">          22 :     const bool include_immature_coinbase{request.params[3].isNull() ? false : request.params[3].get_bool()};</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L295"><span class="lineNum">     295</span>                 :             : </span>
<span id="L296"><span class="lineNum">     296</span>         [<span class="tlaGBC" title="Branch 0 was taken 22 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          22 :     LOCK(pwallet-&gt;cs_wallet);</span></span>
<span id="L297"><span class="lineNum">     297</span>                 :             : </span>
<span id="L298"><span class="lineNum">     298</span>         [<span class="tlaGBC" title="Branch 0 was taken 22 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          22 :     return ListReceived(*pwallet, request.params, true, include_immature_coinbase);</span></span>
<span id="L299"><span class="lineNum">     299</span>                 :<span class="tlaGNC">          44 : },</span></span>
<span id="L300"><span class="lineNum">     300</span>   [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       30784 :     };</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1184 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1184 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 24 was taken 4736 times"> + </span><span class="tlaGBC" title="Branch 25 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 26 was not taken"> - </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span>]
<span id="L301"><span class="lineNum">     301</span>   [<span class="tlaGBC" title="Branch 0 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       17760 : }</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1184 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1184 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1184 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaUNC" title="Branch 22 was not taken"> - </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 24 was not taken"> - </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span>]
<span id="L302"><span class="lineNum">     302</span>                 :             : </span>
<span id="L303"><span class="lineNum">     303</span>                 :<span class="tlaGNC">        4229 : static void MaybePushAddress(UniValue &amp; entry, const CTxDestination &amp;dest)</span></span>
<span id="L304"><span class="lineNum">     304</span>                 :             : {</span>
<span id="L305"><span class="lineNum">     305</span>         [<span class="tlaGBC" title="Branch 0 was taken 4223 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 6 times"> + </span>]:<span class="tlaGNC">        4229 :     if (IsValidDestination(dest)) {</span></span>
<span id="L306"><span class="lineNum">     306</span>   [<span class="tlaGBC" title="Branch 0 was taken 4223 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4223 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        8446 :         entry.pushKV(&quot;address&quot;, EncodeDestination(dest));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 4223 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L307"><span class="lineNum">     307</span>                 :             :     }</span>
<span id="L308"><span class="lineNum">     308</span>                 :<span class="tlaGNC">        4229 : }</span></span>
<span id="L309"><span class="lineNum">     309</span>                 :             : </span>
<span id="L310"><span class="lineNum">     310</span>                 :             : /**</span>
<span id="L311"><span class="lineNum">     311</span>                 :             :  * List transactions based on the given criteria.</span>
<span id="L312"><span class="lineNum">     312</span>                 :             :  *</span>
<span id="L313"><span class="lineNum">     313</span>                 :             :  * @param  wallet         The wallet.</span>
<span id="L314"><span class="lineNum">     314</span>                 :             :  * @param  wtx            The wallet transaction.</span>
<span id="L315"><span class="lineNum">     315</span>                 :             :  * @param  nMinDepth      The minimum confirmation depth.</span>
<span id="L316"><span class="lineNum">     316</span>                 :             :  * @param  fLong          Whether to include the JSON version of the transaction.</span>
<span id="L317"><span class="lineNum">     317</span>                 :             :  * @param  ret            The vector into which the result is stored.</span>
<span id="L318"><span class="lineNum">     318</span>                 :             :  * @param  filter_ismine  The &quot;is mine&quot; filter flags.</span>
<span id="L319"><span class="lineNum">     319</span>                 :             :  * @param  filter_label   Optional label string to filter incoming transactions.</span>
<span id="L320"><span class="lineNum">     320</span>                 :             :  */</span>
<span id="L321"><span class="lineNum">     321</span>                 :             : template &lt;class Vec&gt;</span>
<span id="L322"><span class="lineNum">     322</span>         [<span class="tlaGBC" title="Branch 0 was taken 23633 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">       23633 : static void ListTransactions(const CWallet&amp; wallet, const CWalletTx&amp; wtx, int nMinDepth, bool fLong,</span></span>
<span id="L323"><span class="lineNum">     323</span>                 :             :                              Vec&amp; ret, const isminefilter&amp; filter_ismine, const std::optional&lt;std::string&gt;&amp; filter_label,</span>
<span id="L324"><span class="lineNum">     324</span>                 :             :                              bool include_change = false)</span>
<span id="L325"><span class="lineNum">     325</span>                 :             :     EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet)</span>
<span id="L326"><span class="lineNum">     326</span>                 :             : {</span>
<span id="L327"><span class="lineNum">     327</span>                 :             :     CAmount nFee;</span>
<span id="L328"><span class="lineNum">     328</span>                 :<span class="tlaGNC">       23633 :     std::list&lt;COutputEntry&gt; listReceived;</span></span>
<span id="L329"><span class="lineNum">     329</span>                 :<span class="tlaGNC">       23633 :     std::list&lt;COutputEntry&gt; listSent;</span></span>
<span id="L330"><span class="lineNum">     330</span>                 :             : </span>
<span id="L331"><span class="lineNum">     331</span>         [<span class="tlaGBC" title="Branch 0 was taken 23633 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">       23633 :     CachedTxGetAmounts(wallet, wtx, listReceived, listSent, nFee, filter_ismine, include_change);</span></span>
<span id="L332"><span class="lineNum">     332</span>                 :             : </span>
<span id="L333"><span class="lineNum">     333</span>   [<span class="tlaGBC" title="Branch 0 was taken 23633 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3393 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 20240 times"> + </span>]:<span class="tlaGNC">       23633 :     bool involvesWatchonly = CachedTxIsFromMe(wallet, wtx, ISMINE_WATCH_ONLY);</span></span>
<span id="L334"><span class="lineNum">     334</span>                 :             : </span>
<span id="L335"><span class="lineNum">     335</span>                 :             :     // Sent</span>
<span id="L336"><span class="lineNum">     336</span>         [<span class="tlaGBC" title="Branch 0 was taken 3393 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 20240 times"> + </span>]:<span class="tlaGNC">       23633 :     if (!filter_label.has_value())</span></span>
<span id="L337"><span class="lineNum">     337</span>                 :             :     {</span>
<span id="L338"><span class="lineNum">     338</span>         [<span class="tlaGBC" title="Branch 0 was taken 1089 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 3393 times"> + </span>]:<span class="tlaGNC">        4482 :         for (const COutputEntry&amp; s : listSent)</span></span>
<span id="L339"><span class="lineNum">     339</span>                 :             :         {</span>
<span id="L340"><span class="lineNum">     340</span>                 :<span class="tlaGNC">        1089 :             UniValue entry(UniValue::VOBJ);</span></span>
<span id="L341"><span class="lineNum">     341</span>   [<span class="tlaGBC" title="Branch 0 was taken 1087 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 1087 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        1089 :             if (involvesWatchonly || (wallet.IsMine(s.destination) &amp; ISMINE_WATCH_ONLY)) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 8 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 1079 times"> + </span>]
<span id="L342"><span class="lineNum">     342</span>   [<span class="tlaGBC" title="Branch 0 was taken 10 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 10 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">          20 :                 entry.pushKV(&quot;involvesWatchonly&quot;, true);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 10 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L343"><span class="lineNum">     343</span>                 :             :             }</span>
<span id="L344"><span class="lineNum">     344</span>         [<span class="tlaGBC" title="Branch 0 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1089 :             MaybePushAddress(entry, s.destination);</span></span>
<span id="L345"><span class="lineNum">     345</span>   [<span class="tlaGBC" title="Branch 0 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2178 :             entry.pushKV(&quot;category&quot;, &quot;send&quot;);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L346"><span class="lineNum">     346</span>   [<span class="tlaGBC" title="Branch 0 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2178 :             entry.pushKV(&quot;amount&quot;, ValueFromAmount(-s.amount));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L347"><span class="lineNum">     347</span>         [<span class="tlaGBC" title="Branch 0 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1089 :             const auto* address_book_entry = wallet.FindAddressBookEntry(s.destination);</span></span>
<span id="L348"><span class="lineNum">     348</span>         [<span class="tlaGBC" title="Branch 0 was taken 390 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 699 times"> + </span>]:<span class="tlaGNC">        1089 :             if (address_book_entry) {</span></span>
<span id="L349"><span class="lineNum">     349</span>   [<span class="tlaGBC" title="Branch 0 was taken 390 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 390 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         780 :                 entry.pushKV(&quot;label&quot;, address_book_entry-&gt;GetLabel());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 390 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L350"><span class="lineNum">     350</span>                 :             :             }</span>
<span id="L351"><span class="lineNum">     351</span>   [<span class="tlaGBC" title="Branch 0 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2178 :             entry.pushKV(&quot;vout&quot;, s.vout);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L352"><span class="lineNum">     352</span>   [<span class="tlaGBC" title="Branch 0 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2178 :             entry.pushKV(&quot;fee&quot;, ValueFromAmount(-nFee));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L353"><span class="lineNum">     353</span>         [<span class="tlaGBC" title="Branch 0 was taken 414 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 675 times"> + </span>]:<span class="tlaGNC">        1089 :             if (fLong)</span></span>
<span id="L354"><span class="lineNum">     354</span>         [<span class="tlaGBC" title="Branch 0 was taken 414 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         414 :                 WalletTxToJSON(wallet, wtx, entry);</span></span>
<span id="L355"><span class="lineNum">     355</span>   [<span class="tlaGBC" title="Branch 0 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2178 :             entry.pushKV(&quot;abandoned&quot;, wtx.isAbandoned());</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1089 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 367 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L356"><span class="lineNum">     356</span>         [<span class="tlaGBC" title="Branch 0 was taken 722 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1089 :             ret.push_back(std::move(entry));</span></span>
<span id="L357"><span class="lineNum">     357</span>                 :             :         }</span>
<span id="L358"><span class="lineNum">     358</span>                 :             :     }</span>
<span id="L359"><span class="lineNum">     359</span>                 :             : </span>
<span id="L360"><span class="lineNum">     360</span>                 :             :     // Received</span>
<span id="L361"><span class="lineNum">     361</span>   [<span class="tlaGBC" title="Branch 0 was taken 22577 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 1056 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 22577 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       23633 :     if (listReceived.size() &gt; 0 &amp;&amp; wallet.GetTxDepthInMainChain(wtx) &gt;= nMinDepth) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 22530 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 47 times"> + </span>]
<span id="L362"><span class="lineNum">     362</span>   [<span class="tlaGBC" title="Branch 0 was taken 22687 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 22687 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 22530 times"> + </span>]:<span class="tlaGNC">       45217 :         for (const COutputEntry&amp; r : listReceived)</span></span>
<span id="L363"><span class="lineNum">     363</span>                 :             :         {</span>
<span id="L364"><span class="lineNum">     364</span>                 :<span class="tlaGNC">       22687 :             std::string label;</span></span>
<span id="L365"><span class="lineNum">     365</span>         [<span class="tlaGBC" title="Branch 0 was taken 22687 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">       22687 :             const auto* address_book_entry = wallet.FindAddressBookEntry(r.destination);</span></span>
<span id="L366"><span class="lineNum">     366</span>         [<span class="tlaGBC" title="Branch 0 was taken 22514 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 173 times"> + </span>]:<span class="tlaGNC">       22687 :             if (address_book_entry) {</span></span>
<span id="L367"><span class="lineNum">     367</span>                 :<span class="tlaGNC">       22514 :                 label = address_book_entry-&gt;GetLabel();</span></span>
<span id="L368"><span class="lineNum">     368</span>                 :             :             }</span>
<span id="L369"><span class="lineNum">     369</span>   [<span class="tlaGBC" title="Branch 0 was taken 19853 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2834 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 306 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 19547 times"> + </span>]:<span class="tlaGNC">       22687 :             if (filter_label.has_value() &amp;&amp; label != filter_label.value()) {</span></span>
<span id="L370"><span class="lineNum">     370</span>                 :             :                 continue;</span>
<span id="L371"><span class="lineNum">     371</span>                 :             :             }</span>
<span id="L372"><span class="lineNum">     372</span>                 :<span class="tlaGNC">        3140 :             UniValue entry(UniValue::VOBJ);</span></span>
<span id="L373"><span class="lineNum">     373</span>   [<span class="tlaGBC" title="Branch 0 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        3140 :             if (involvesWatchonly || (wallet.IsMine(r.destination) &amp; ISMINE_WATCH_ONLY)) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 237 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 2903 times"> + </span>]
<span id="L374"><span class="lineNum">     374</span>   [<span class="tlaGBC" title="Branch 0 was taken 237 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 237 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         474 :                 entry.pushKV(&quot;involvesWatchonly&quot;, true);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 237 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L375"><span class="lineNum">     375</span>                 :             :             }</span>
<span id="L376"><span class="lineNum">     376</span>         [<span class="tlaGBC" title="Branch 0 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3140 :             MaybePushAddress(entry, r.destination);</span></span>
<span id="L377"><span class="lineNum">     377</span>   [<span class="tlaGBC" title="Branch 0 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        3140 :             PushParentDescriptors(wallet, wtx.tx-&gt;vout.at(r.vout).scriptPubKey, entry);</span></span>
<span id="L378"><span class="lineNum">     378</span>         [<span class="tlaGBC" title="Branch 0 was taken 1908 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 1232 times"> + </span>]:<span class="tlaGNC">        3140 :             if (wtx.IsCoinBase())</span></span>
<span id="L379"><span class="lineNum">     379</span>                 :             :             {</span>
<span id="L380"><span class="lineNum">     380</span>   [<span class="tlaGBC" title="Branch 0 was taken 1908 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 406 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 1502 times"> + </span>]:<span class="tlaGNC">        1908 :                 if (wallet.GetTxDepthInMainChain(wtx) &lt; 1)</span></span>
<span id="L381"><span class="lineNum">     381</span>   [<span class="tlaGBC" title="Branch 0 was taken 406 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 406 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         812 :                     entry.pushKV(&quot;category&quot;, &quot;orphan&quot;);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 406 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L382"><span class="lineNum">     382</span>   [<span class="tlaGBC" title="Branch 0 was taken 1502 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1213 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 289 times"> + </span>]:<span class="tlaGNC">        1502 :                 else if (wallet.IsTxImmatureCoinBase(wtx))</span></span>
<span id="L383"><span class="lineNum">     383</span>   [<span class="tlaGBC" title="Branch 0 was taken 1213 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1213 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2426 :                     entry.pushKV(&quot;category&quot;, &quot;immature&quot;);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1213 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L384"><span class="lineNum">     384</span>                 :             :                 else</span>
<span id="L385"><span class="lineNum">     385</span>   [<span class="tlaGBC" title="Branch 0 was taken 289 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 289 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         578 :                     entry.pushKV(&quot;category&quot;, &quot;generate&quot;);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 289 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L386"><span class="lineNum">     386</span>                 :             :             }</span>
<span id="L387"><span class="lineNum">     387</span>                 :             :             else</span>
<span id="L388"><span class="lineNum">     388</span>                 :             :             {</span>
<span id="L389"><span class="lineNum">     389</span>   [<span class="tlaGBC" title="Branch 0 was taken 1232 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1232 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2464 :                 entry.pushKV(&quot;category&quot;, &quot;receive&quot;);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1232 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L390"><span class="lineNum">     390</span>                 :             :             }</span>
<span id="L391"><span class="lineNum">     391</span>   [<span class="tlaGBC" title="Branch 0 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        6280 :             entry.pushKV(&quot;amount&quot;, ValueFromAmount(r.amount));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L392"><span class="lineNum">     392</span>         [<span class="tlaGBC" title="Branch 0 was taken 2967 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 173 times"> + </span>]:<span class="tlaGNC">        3140 :             if (address_book_entry) {</span></span>
<span id="L393"><span class="lineNum">     393</span>   [<span class="tlaGBC" title="Branch 0 was taken 2967 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2967 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        5934 :                 entry.pushKV(&quot;label&quot;, label);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 2967 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L394"><span class="lineNum">     394</span>                 :             :             }</span>
<span id="L395"><span class="lineNum">     395</span>   [<span class="tlaGBC" title="Branch 0 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        6280 :             entry.pushKV(&quot;vout&quot;, r.vout);</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 450 times"> + </span><span class="tlaGBC" title="Branch 7 was taken 2690 times"> + </span>]
<span id="L396"><span class="lineNum">     396</span>   [<span class="tlaGBC" title="Branch 0 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        6280 :             entry.pushKV(&quot;abandoned&quot;, wtx.isAbandoned());</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 3140 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L397"><span class="lineNum">     397</span>         [<span class="tlaGBC" title="Branch 0 was taken 2823 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 317 times"> + </span>]:<span class="tlaGNC">        3140 :             if (fLong)</span></span>
<span id="L398"><span class="lineNum">     398</span>         [<span class="tlaGBC" title="Branch 0 was taken 2823 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2823 :                 WalletTxToJSON(wallet, wtx, entry);</span></span>
<span id="L399"><span class="lineNum">     399</span>         [<span class="tlaGBC" title="Branch 0 was taken 1294 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3140 :             ret.push_back(std::move(entry));</span></span>
<span id="L400"><span class="lineNum">     400</span>                 :             :         }</span>
<span id="L401"><span class="lineNum">     401</span>                 :             :     }</span>
<span id="L402"><span class="lineNum">     402</span>                 :<span class="tlaGNC">       23633 : }</span></span>
<span id="L403"><span class="lineNum">     403</span>                 :             : </span>
<span id="L404"><span class="lineNum">     404</span>                 :             : </span>
<span id="L405"><span class="lineNum">     405</span>                 :<span class="tlaGNC">        4771 : static std::vector&lt;RPCResult&gt; TransactionDescriptionString()</span></span>
<span id="L406"><span class="lineNum">     406</span>                 :             : {</span>
<span id="L407"><span class="lineNum">     407</span>                 :<span class="tlaGNC">        4771 :     return{{RPCResult::Type::NUM, &quot;confirmations&quot;, &quot;The number of confirmations for the transaction. Negative confirmations means the\n&quot;</span></span>
<span id="L408"><span class="lineNum">     408</span>                 :             :                &quot;transaction conflicted that many blocks ago.&quot;},</span>
<span id="L409"><span class="lineNum">     409</span>                 :             :            {RPCResult::Type::BOOL, &quot;generated&quot;, /*optional=*/true, &quot;Only present if the transaction's only input is a coinbase one.&quot;},</span>
<span id="L410"><span class="lineNum">     410</span>                 :             :            {RPCResult::Type::BOOL, &quot;trusted&quot;, /*optional=*/true, &quot;Whether we consider the transaction to be trusted and safe to spend from.\n&quot;</span>
<span id="L411"><span class="lineNum">     411</span>                 :             :                 &quot;Only present when the transaction has 0 confirmations (or negative confirmations, if conflicted).&quot;},</span>
<span id="L412"><span class="lineNum">     412</span>                 :             :            {RPCResult::Type::STR_HEX, &quot;blockhash&quot;, /*optional=*/true, &quot;The block hash containing the transaction.&quot;},</span>
<span id="L413"><span class="lineNum">     413</span>                 :             :            {RPCResult::Type::NUM, &quot;blockheight&quot;, /*optional=*/true, &quot;The block height containing the transaction.&quot;},</span>
<span id="L414"><span class="lineNum">     414</span>                 :             :            {RPCResult::Type::NUM, &quot;blockindex&quot;, /*optional=*/true, &quot;The index of the transaction in the block that includes it.&quot;},</span>
<span id="L415"><span class="lineNum">     415</span>         [<span class="tlaGBC" title="Branch 0 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        9542 :            {RPCResult::Type::NUM_TIME, &quot;blocktime&quot;, /*optional=*/true, &quot;The block time expressed in &quot; + UNIX_EPOCH_TIME + &quot;.&quot;},</span></span>
<span id="L416"><span class="lineNum">     416</span>                 :             :            {RPCResult::Type::STR_HEX, &quot;txid&quot;, &quot;The transaction id.&quot;},</span>
<span id="L417"><span class="lineNum">     417</span>                 :             :            {RPCResult::Type::STR_HEX, &quot;wtxid&quot;, &quot;The hash of serialized transaction, including witness data.&quot;},</span>
<span id="L418"><span class="lineNum">     418</span>                 :             :            {RPCResult::Type::ARR, &quot;walletconflicts&quot;, &quot;Confirmed transactions that have been detected by the wallet to conflict with this transaction.&quot;,</span>
<span id="L419"><span class="lineNum">     419</span>                 :             :            {</span>
<span id="L420"><span class="lineNum">     420</span>                 :             :                {RPCResult::Type::STR_HEX, &quot;txid&quot;, &quot;The transaction id.&quot;},</span>
<span id="L421"><span class="lineNum">     421</span>                 :             :            }},</span>
<span id="L422"><span class="lineNum">     422</span>                 :             :            {RPCResult::Type::STR_HEX, &quot;replaced_by_txid&quot;, /*optional=*/true, &quot;Only if 'category' is 'send'. The txid if this tx was replaced.&quot;},</span>
<span id="L423"><span class="lineNum">     423</span>                 :             :            {RPCResult::Type::STR_HEX, &quot;replaces_txid&quot;, /*optional=*/true, &quot;Only if 'category' is 'send'. The txid if this tx replaces another.&quot;},</span>
<span id="L424"><span class="lineNum">     424</span>                 :             :            {RPCResult::Type::ARR, &quot;mempoolconflicts&quot;, &quot;Transactions in the mempool that directly conflict with either this transaction or an ancestor transaction&quot;,</span>
<span id="L425"><span class="lineNum">     425</span>                 :             :            {</span>
<span id="L426"><span class="lineNum">     426</span>                 :             :                {RPCResult::Type::STR_HEX, &quot;txid&quot;, &quot;The transaction id.&quot;},</span>
<span id="L427"><span class="lineNum">     427</span>                 :             :            }},</span>
<span id="L428"><span class="lineNum">     428</span>                 :             :            {RPCResult::Type::STR, &quot;to&quot;, /*optional=*/true, &quot;If a comment to is associated with the transaction.&quot;},</span>
<span id="L429"><span class="lineNum">     429</span>         [<span class="tlaGBC" title="Branch 0 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        9542 :            {RPCResult::Type::NUM_TIME, &quot;time&quot;, &quot;The transaction time expressed in &quot; + UNIX_EPOCH_TIME + &quot;.&quot;},</span></span>
<span id="L430"><span class="lineNum">     430</span>         [<span class="tlaGBC" title="Branch 0 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        9542 :            {RPCResult::Type::NUM_TIME, &quot;timereceived&quot;, &quot;The time received expressed in &quot; + UNIX_EPOCH_TIME + &quot;.&quot;},</span></span>
<span id="L431"><span class="lineNum">     431</span>                 :             :            {RPCResult::Type::STR, &quot;comment&quot;, /*optional=*/true, &quot;If a comment is associated with the transaction, only present if not empty.&quot;},</span>
<span id="L432"><span class="lineNum">     432</span>                 :             :            {RPCResult::Type::STR, &quot;bip125-replaceable&quot;, &quot;(\&quot;yes|no|unknown\&quot;) Whether this transaction signals BIP125 replaceability or has an unconfirmed ancestor signaling BIP125 replaceability.\n&quot;</span>
<span id="L433"><span class="lineNum">     433</span>                 :             :                &quot;May be unknown for unconfirmed transactions not in the mempool because their unconfirmed ancestors are unknown.&quot;},</span>
<span id="L434"><span class="lineNum">     434</span>                 :             :            {RPCResult::Type::ARR, &quot;parent_descs&quot;, /*optional=*/true, &quot;Only if 'category' is 'received'. List of parent descriptors for the output script of this coin.&quot;, {</span>
<span id="L435"><span class="lineNum">     435</span>                 :             :                {RPCResult::Type::STR, &quot;desc&quot;, &quot;The descriptor string.&quot;},</span>
<span id="L436"><span class="lineNum">     436</span>                 :             :            }},</span>
<span id="L437"><span class="lineNum">     437</span>   [<span class="tlaGBC" title="Branch 0 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">      157443 :            };</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 39 was not taken"> - </span><span class="tlaGBC" title="Branch 40 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 41 was not taken"> - </span><span class="tlaGBC" title="Branch 42 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 44 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaGBC" title="Branch 46 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span><span class="tlaGBC" title="Branch 48 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 49 was not taken"> - </span><span class="tlaGBC" title="Branch 50 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 51 was not taken"> - </span><span class="tlaGBC" title="Branch 52 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 53 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 54 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 55 was not taken"> - </span><span class="tlaGBC" title="Branch 56 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 57 was not taken"> - </span><span class="tlaGBC" title="Branch 58 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 59 was not taken"> - </span><span class="tlaGBC" title="Branch 60 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 61 was not taken"> - </span><span class="tlaGBC" title="Branch 62 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 63 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 64 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 65 was not taken"> - </span><span class="tlaGBC" title="Branch 66 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 67 was not taken"> - </span><span class="tlaGBC" title="Branch 68 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 69 was not taken"> - </span><span class="tlaGBC" title="Branch 70 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 71 was not taken"> - </span><span class="tlaGBC" title="Branch 72 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 73 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 74 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 75 was not taken"> - </span><span class="tlaGBC" title="Branch 76 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 77 was not taken"> - </span><span class="tlaGBC" title="Branch 78 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 79 was not taken"> - </span><span class="tlaGBC" title="Branch 80 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 81 was not taken"> - </span><span class="tlaGBC" title="Branch 82 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 83 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 84 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 85 was not taken"> - </span><span class="tlaGBC" title="Branch 86 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 87 was not taken"> - </span><span class="tlaGBC" title="Branch 88 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 89 was not taken"> - </span><span class="tlaGBC" title="Branch 90 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 91 was not taken"> - </span><span class="tlaGBC" title="Branch 92 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 93 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 94 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 95 was not taken"> - </span><span class="tlaGBC" title="Branch 96 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 97 was not taken"> - </span><span class="tlaGBC" title="Branch 98 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 99 was not taken"> - </span><span class="tlaGBC" title="Branch 100 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 101 was not taken"> - </span><span class="tlaGBC" title="Branch 102 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 103 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 104 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 105 was not taken"> - </span><span class="tlaGBC" title="Branch 106 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 107 was not taken"> - </span><span class="tlaGBC" title="Branch 108 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 109 was not taken"> - </span><span class="tlaGBC" title="Branch 110 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 111 was not taken"> - </span><span class="tlaGBC" title="Branch 112 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 113 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 114 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 115 was not taken"> - </span><span class="tlaGBC" title="Branch 116 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 117 was not taken"> - </span><span class="tlaGBC" title="Branch 118 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 119 was not taken"> - </span><span class="tlaGBC" title="Branch 120 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 121 was not taken"> - </span><span class="tlaGBC" title="Branch 122 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 123 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 124 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 125 was not taken"> - </span><span class="tlaGBC" title="Branch 126 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 127 was not taken"> - </span><span class="tlaGBC" title="Branch 128 was taken 90649 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 129 was taken 4771 times"> + </span><span class="tlaGBC" title="Branch 130 was taken 4771 times"> + </span><span class="tlaGBC" title="Branch 131 was taken 4771 times"> + </span><span class="tlaGBC" title="Branch 132 was taken 4771 times"> + </span><span class="tlaGBC" title="Branch 133 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 134 was taken 4771 times"> + </span><span class="tlaGBC" title="Branch 135 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 136 was not taken"> - </span><span class="tlaUNC" title="Branch 137 was not taken"> - </span><span class="tlaUNC" title="Branch 138 was not taken"> - </span> 
<span class="lineNum">        </span>    <span class="tlaUNC" title="Branch 139 was not taken"> - </span><span class="tlaUNC" title="Branch 140 was not taken"> - </span><span class="tlaUNC" title="Branch 141 was not taken"> - </span><span class="tlaUNC" title="Branch 142 was not taken"> - </span> 
<span class="lineNum">        </span>             <span class="tlaUNC" title="Branch 143 was not taken"> - </span>]
<span id="L438"><span class="lineNum">     438</span>   [<span class="tlaGBC" title="Branch 0 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">      109733 : }</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 4771 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 39 was not taken"> - </span><span class="tlaGBC" title="Branch 40 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 41 was not taken"> - </span><span class="tlaGBC" title="Branch 42 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 44 was taken 4771 times"> + </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaUNC" title="Branch 46 was not taken"> - </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span>]
<span id="L439"><span class="lineNum">     439</span>                 :             : </span>
<span id="L440"><span class="lineNum">     440</span>                 :<span class="tlaGNC">        1694 : RPCHelpMan listtransactions()</span></span>
<span id="L441"><span class="lineNum">     441</span>                 :             : {</span>
<span id="L442"><span class="lineNum">     442</span>                 :<span class="tlaGNC">        1694 :     return RPCHelpMan{&quot;listtransactions&quot;,</span></span>
<span id="L443"><span class="lineNum">     443</span>                 :             :                 &quot;\nIf a label name is provided, this will return only incoming transactions paying to addresses with the specified label.\n&quot;</span>
<span id="L444"><span class="lineNum">     444</span>                 :             :                 &quot;\nReturns up to 'count' most recent transactions skipping the first 'from' transactions.\n&quot;,</span>
<span id="L445"><span class="lineNum">     445</span>                 :             :                 {</span>
<span id="L446"><span class="lineNum">     446</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1694 :                     {&quot;label|dummy&quot;, RPCArg::Type::STR, RPCArg::Optional::OMITTED, &quot;If set, should be a valid label name to return only incoming transactions\n&quot;</span></span>
<span id="L447"><span class="lineNum">     447</span>                 :             :                           &quot;with the specified label, or \&quot;*\&quot; to disable filtering and return all transactions.&quot;},</span>
<span id="L448"><span class="lineNum">     448</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3388 :                     {&quot;count&quot;, RPCArg::Type::NUM, RPCArg::Default{10}, &quot;The number of transactions to return&quot;},</span></span>
<span id="L449"><span class="lineNum">     449</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3388 :                     {&quot;skip&quot;, RPCArg::Type::NUM, RPCArg::Default{0}, &quot;The number of transactions to skip&quot;},</span></span>
<span id="L450"><span class="lineNum">     450</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3388 :                     {&quot;include_watchonly&quot;, RPCArg::Type::BOOL, RPCArg::DefaultHint{&quot;true for watch-only wallets, otherwise false&quot;}, &quot;Include transactions to watch-only addresses (see 'importaddress')&quot;},</span></span>
<span id="L451"><span class="lineNum">     451</span>                 :             :                 },</span>
<span id="L452"><span class="lineNum">     452</span>                 :<span class="tlaUNC tlaBgUNC">           0 :                 RPCResult{</span></span>
<span id="L453"><span class="lineNum">     453</span>                 :             :                     RPCResult::Type::ARR, &quot;&quot;, &quot;&quot;,</span>
<span id="L454"><span class="lineNum">     454</span>                 :             :                     {</span>
<span id="L455"><span class="lineNum">     455</span>   [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC tlaBgGNC">       27104 :                         {RPCResult::Type::OBJ, &quot;&quot;, &quot;&quot;, Cat(Cat&lt;std::vector&lt;RPCResult&gt;&gt;(</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 39 was not taken"> - </span><span class="tlaGBC" title="Branch 40 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 41 was not taken"> - </span><span class="tlaGBC" title="Branch 42 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 44 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaGBC" title="Branch 46 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span><span class="tlaGBC" title="Branch 48 was taken 11858 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 49 was taken 1694 times"> + </span><span class="tlaGBC" title="Branch 50 was taken 1694 times"> + </span><span class="tlaGBC" title="Branch 51 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 52 was not taken"> - </span><span class="tlaUNC" title="Branch 53 was not taken"> - </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 54 was not taken"> - </span><span class="tlaUNC" title="Branch 55 was not taken"> - </span>]
<span id="L456"><span class="lineNum">     456</span>                 :             :                         {</span>
<span id="L457"><span class="lineNum">     457</span>                 :             :                             {RPCResult::Type::BOOL, &quot;involvesWatchonly&quot;, /*optional=*/true, &quot;Only returns true if imported addresses were involved in transaction.&quot;},</span>
<span id="L458"><span class="lineNum">     458</span>                 :             :                             {RPCResult::Type::STR, &quot;address&quot;,  /*optional=*/true, &quot;The bitcoin address of the transaction (not returned if the output does not have an address, e.g. OP_RETURN null data).&quot;},</span>
<span id="L459"><span class="lineNum">     459</span>                 :             :                             {RPCResult::Type::STR, &quot;category&quot;, &quot;The transaction category.\n&quot;</span>
<span id="L460"><span class="lineNum">     460</span>                 :             :                                 &quot;\&quot;send\&quot;                  Transactions sent.\n&quot;</span>
<span id="L461"><span class="lineNum">     461</span>                 :             :                                 &quot;\&quot;receive\&quot;               Non-coinbase transactions received.\n&quot;</span>
<span id="L462"><span class="lineNum">     462</span>                 :             :                                 &quot;\&quot;generate\&quot;              Coinbase transactions received with more than 100 confirmations.\n&quot;</span>
<span id="L463"><span class="lineNum">     463</span>                 :             :                                 &quot;\&quot;immature\&quot;              Coinbase transactions received with 100 or fewer confirmations.\n&quot;</span>
<span id="L464"><span class="lineNum">     464</span>                 :             :                                 &quot;\&quot;orphan\&quot;                Orphaned coinbase transactions received.&quot;},</span>
<span id="L465"><span class="lineNum">     465</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3388 :                             {RPCResult::Type::STR_AMOUNT, &quot;amount&quot;, &quot;The amount in &quot; + CURRENCY_UNIT + &quot;. This is negative for the 'send' category, and is positive\n&quot;</span></span>
<span id="L466"><span class="lineNum">     466</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1694 :                                 &quot;for all other categories&quot;},</span></span>
<span id="L467"><span class="lineNum">     467</span>                 :             :                             {RPCResult::Type::STR, &quot;label&quot;, /*optional=*/true, &quot;A comment for the address/transaction, if any&quot;},</span>
<span id="L468"><span class="lineNum">     468</span>                 :             :                             {RPCResult::Type::NUM, &quot;vout&quot;, &quot;the vout value&quot;},</span>
<span id="L469"><span class="lineNum">     469</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3388 :                             {RPCResult::Type::STR_AMOUNT, &quot;fee&quot;, /*optional=*/true, &quot;The amount of the fee in &quot; + CURRENCY_UNIT + &quot;. This is negative and only available for the\n&quot;</span></span>
<span id="L470"><span class="lineNum">     470</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1694 :                                  &quot;'send' category of transactions.&quot;},</span></span>
<span id="L471"><span class="lineNum">     471</span>                 :             :                         },</span>
<span id="L472"><span class="lineNum">     472</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3388 :                         TransactionDescriptionString()),</span></span>
<span id="L473"><span class="lineNum">     473</span>                 :             :                         {</span>
<span id="L474"><span class="lineNum">     474</span>                 :             :                             {RPCResult::Type::BOOL, &quot;abandoned&quot;, &quot;'true' if the transaction has been abandoned (inputs are respendable).&quot;},</span>
<span id="L475"><span class="lineNum">     475</span>                 :             :                         })},</span>
<span id="L476"><span class="lineNum">     476</span>                 :             :                     }</span>
<span id="L477"><span class="lineNum">     477</span>   [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        8470 :                 },</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1694 times"> + </span><span class="tlaGBC" title="Branch 13 was taken 1694 times"> + </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 14 was not taken"> - </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span>]
<span id="L478"><span class="lineNum">     478</span>                 :<span class="tlaGNC">        1694 :                 RPCExamples{</span></span>
<span id="L479"><span class="lineNum">     479</span>                 :             :             &quot;\nList the most recent 10 transactions in the systems\n&quot;</span>
<span id="L480"><span class="lineNum">     480</span>   [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        3388 :             + HelpExampleCli(&quot;listtransactions&quot;, &quot;&quot;) +</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L481"><span class="lineNum">     481</span>                 :<span class="tlaGNC">        1694 :             &quot;\nList transactions 100 to 120\n&quot;</span></span>
<span id="L482"><span class="lineNum">     482</span>   [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        6776 :             + HelpExampleCli(&quot;listtransactions&quot;, &quot;\&quot;*\&quot; 20 100&quot;) +</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L483"><span class="lineNum">     483</span>                 :<span class="tlaGNC">        1694 :             &quot;\nAs a JSON-RPC call\n&quot;</span></span>
<span id="L484"><span class="lineNum">     484</span>   [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        6776 :             + HelpExampleRpc(&quot;listtransactions&quot;, &quot;\&quot;*\&quot;, 20, 100&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L485"><span class="lineNum">     485</span>         [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1694 :                 },</span></span>
<span id="L486"><span class="lineNum">     486</span>                 :<span class="tlaGNC">         532 :         [&amp;](const RPCHelpMan&amp; self, const JSONRPCRequest&amp; request) -&gt; UniValue</span></span>
<span id="L487"><span class="lineNum">     487</span>                 :             : {</span>
<span id="L488"><span class="lineNum">     488</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 532 times"> + </span>]:<span class="tlaGNC">         532 :     const std::shared_ptr&lt;const CWallet&gt; pwallet = GetWalletForJSONRPCRequest(request);</span></span>
<span id="L489"><span class="lineNum">     489</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 532 times"> + </span>]:<span class="tlaGNC">         532 :     if (!pwallet) return UniValue::VNULL;</span></span>
<span id="L490"><span class="lineNum">     490</span>                 :             : </span>
<span id="L491"><span class="lineNum">     491</span>                 :             :     // Make sure the results are valid at least up to the most recent block</span>
<span id="L492"><span class="lineNum">     492</span>                 :             :     // the user could have gotten from another RPC command prior to now</span>
<span id="L493"><span class="lineNum">     493</span>         [<span class="tlaGBC" title="Branch 0 was taken 532 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         532 :     pwallet-&gt;BlockUntilSyncedToCurrentChain();</span></span>
<span id="L494"><span class="lineNum">     494</span>                 :             : </span>
<span id="L495"><span class="lineNum">     495</span>                 :<span class="tlaGNC">         532 :     std::optional&lt;std::string&gt; filter_label;</span></span>
<span id="L496"><span class="lineNum">     496</span>   [<span class="tlaGBC" title="Branch 0 was taken 532 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 402 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 130 times"> + </span> :<span class="tlaGNC">         532 :     if (!request.params[0].isNull() &amp;&amp; request.params[0].get_str() != &quot;*&quot;) {</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 402 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 402 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 386 times"> + </span> 
<span class="lineNum">        </span>             <span class="tlaGBC" title="Branch 9 was taken 16 times"> + </span>]
<span id="L497"><span class="lineNum">     497</span>   [<span class="tlaGBC" title="Branch 0 was taken 386 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 386 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">         386 :         filter_label.emplace(LabelFromValue(request.params[0]));</span></span>
<span id="L498"><span class="lineNum">     498</span>   [<span class="tlaGBC" title="Branch 0 was taken 386 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 384 times"> + </span>]:<span class="tlaGNC">         386 :         if (filter_label.value().empty()) {</span></span>
<span id="L499"><span class="lineNum">     499</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :             throw JSONRPCError(RPC_INVALID_PARAMETER, &quot;Label argument must be a valid label name or \&quot;*\&quot;.&quot;);</span></span>
<span id="L500"><span class="lineNum">     500</span>                 :             :         }</span>
<span id="L501"><span class="lineNum">     501</span>                 :             :     }</span>
<span id="L502"><span class="lineNum">     502</span>                 :<span class="tlaGNC">         530 :     int nCount = 10;</span></span>
<span id="L503"><span class="lineNum">     503</span>   [<span class="tlaGBC" title="Branch 0 was taken 530 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 400 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 130 times"> + </span>]:<span class="tlaGNC">         530 :     if (!request.params[1].isNull())</span></span>
<span id="L504"><span class="lineNum">     504</span>   [<span class="tlaGBC" title="Branch 0 was taken 400 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 400 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">         400 :         nCount = request.params[1].getInt&lt;int&gt;();</span></span>
<span id="L505"><span class="lineNum">     505</span>                 :<span class="tlaGNC">         530 :     int nFrom = 0;</span></span>
<span id="L506"><span class="lineNum">     506</span>   [<span class="tlaGBC" title="Branch 0 was taken 530 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 14 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 516 times"> + </span>]:<span class="tlaGNC">         530 :     if (!request.params[2].isNull())</span></span>
<span id="L507"><span class="lineNum">     507</span>   [<span class="tlaGBC" title="Branch 0 was taken 14 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 14 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">          14 :         nFrom = request.params[2].getInt&lt;int&gt;();</span></span>
<span id="L508"><span class="lineNum">     508</span>                 :<span class="tlaGNC">         530 :     isminefilter filter = ISMINE_SPENDABLE;</span></span>
<span id="L509"><span class="lineNum">     509</span>                 :             : </span>
<span id="L510"><span class="lineNum">     510</span>   [<span class="tlaGBC" title="Branch 0 was taken 530 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 530 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         530 :     if (ParseIncludeWatchonly(request.params[3], *pwallet)) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 415 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 115 times"> + </span>]
<span id="L511"><span class="lineNum">     511</span>                 :<span class="tlaGNC">         415 :         filter |= ISMINE_WATCH_ONLY;</span></span>
<span id="L512"><span class="lineNum">     512</span>                 :             :     }</span>
<span id="L513"><span class="lineNum">     513</span>                 :             : </span>
<span id="L514"><span class="lineNum">     514</span>         [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 528 times"> + </span>]:<span class="tlaGNC">         530 :     if (nCount &lt; 0)</span></span>
<span id="L515"><span class="lineNum">     515</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :         throw JSONRPCError(RPC_INVALID_PARAMETER, &quot;Negative count&quot;);</span></span>
<span id="L516"><span class="lineNum">     516</span>         [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 526 times"> + </span>]:<span class="tlaGNC">         528 :     if (nFrom &lt; 0)</span></span>
<span id="L517"><span class="lineNum">     517</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :         throw JSONRPCError(RPC_INVALID_PARAMETER, &quot;Negative from&quot;);</span></span>
<span id="L518"><span class="lineNum">     518</span>                 :             : </span>
<span id="L519"><span class="lineNum">     519</span>                 :<span class="tlaGNC">         526 :     std::vector&lt;UniValue&gt; ret;</span></span>
<span id="L520"><span class="lineNum">     520</span>                 :<span class="tlaGNC">         526 :     {</span></span>
<span id="L521"><span class="lineNum">     521</span>         [<span class="tlaGBC" title="Branch 0 was taken 526 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         526 :         LOCK(pwallet-&gt;cs_wallet);</span></span>
<span id="L522"><span class="lineNum">     522</span>                 :             : </span>
<span id="L523"><span class="lineNum">     523</span>                 :<span class="tlaGNC">         526 :         const CWallet::TxItems &amp; txOrdered = pwallet-&gt;wtxOrdered;</span></span>
<span id="L524"><span class="lineNum">     524</span>                 :             : </span>
<span id="L525"><span class="lineNum">     525</span>                 :             :         // iterate backwards until we have nCount items to return:</span>
<span id="L526"><span class="lineNum">     526</span>         [<span class="tlaGBC" title="Branch 0 was taken 21875 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 450 times"> + </span>]:<span class="tlaGNC">       22325 :         for (CWallet::TxItems::const_reverse_iterator it = txOrdered.rbegin(); it != txOrdered.rend(); ++it)</span></span>
<span id="L527"><span class="lineNum">     527</span>                 :             :         {</span>
<span id="L528"><span class="lineNum">     528</span>                 :<span class="tlaGNC">       21875 :             CWalletTx *const pwtx = (*it).second;</span></span>
<span id="L529"><span class="lineNum">     529</span>         [<span class="tlaGBC" title="Branch 0 was taken 21875 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">       21875 :             ListTransactions(*pwallet, *pwtx, 0, true, ret, filter, filter_label);</span></span>
<span id="L530"><span class="lineNum">     530</span>         [<span class="tlaGBC" title="Branch 0 was taken 21799 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 76 times"> + </span>]:<span class="tlaGNC">       21875 :             if ((int)ret.size() &gt;= (nCount+nFrom)) break;</span></span>
<span id="L531"><span class="lineNum">     531</span>                 :             :         }</span>
<span id="L532"><span class="lineNum">     532</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     }</span></span>
<span id="L533"><span class="lineNum">     533</span>                 :             : </span>
<span id="L534"><span class="lineNum">     534</span>                 :             :     // ret is newest to oldest</span>
<span id="L535"><span class="lineNum">     535</span>                 :             : </span>
<span id="L536"><span class="lineNum">     536</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 526 times"> + </span>]:<span class="tlaGNC tlaBgGNC">         526 :     if (nFrom &gt; (int)ret.size())</span></span>
<span id="L537"><span class="lineNum">     537</span>                 :<span class="tlaUNC tlaBgUNC">           0 :         nFrom = ret.size();</span></span>
<span id="L538"><span class="lineNum">     538</span>         [<span class="tlaGBC" title="Branch 0 was taken 450 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 76 times"> + </span>]:<span class="tlaGNC tlaBgGNC">         526 :     if ((nFrom + nCount) &gt; (int)ret.size())</span></span>
<span id="L539"><span class="lineNum">     539</span>                 :<span class="tlaGNC">         450 :         nCount = ret.size() - nFrom;</span></span>
<span id="L540"><span class="lineNum">     540</span>                 :             : </span>
<span id="L541"><span class="lineNum">     541</span>                 :<span class="tlaGNC">         526 :     auto txs_rev_it{std::make_move_iterator(ret.rend())};</span></span>
<span id="L542"><span class="lineNum">     542</span>                 :<span class="tlaGNC">         526 :     UniValue result{UniValue::VARR};</span></span>
<span id="L543"><span class="lineNum">     543</span>         [<span class="tlaGBC" title="Branch 0 was taken 526 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         526 :     result.push_backV(txs_rev_it - nFrom - nCount, txs_rev_it - nFrom); // Return oldest to newest</span></span>
<span id="L544"><span class="lineNum">     544</span>                 :<span class="tlaGNC">         526 :     return result;</span></span>
<span id="L545"><span class="lineNum">     545</span>                 :<span class="tlaGNC">        1058 : },</span></span>
<span id="L546"><span class="lineNum">     546</span>   [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       40656 :     };</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 24 was taken 6776 times"> + </span><span class="tlaGBC" title="Branch 25 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 26 was not taken"> - </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span>]
<span id="L547"><span class="lineNum">     547</span>   [<span class="tlaGBC" title="Branch 0 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       32186 : }</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1694 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1694 times"> + </span> 
<span class="lineNum">        </span>    <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaUNC" title="Branch 30 was not taken"> - </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaUNC" title="Branch 32 was not taken"> - </span> 
<span class="lineNum">        </span>             <span class="tlaUNC" title="Branch 33 was not taken"> - </span>]
<span id="L548"><span class="lineNum">     548</span>                 :             : </span>
<span id="L549"><span class="lineNum">     549</span>                 :<span class="tlaGNC">        1230 : RPCHelpMan listsinceblock()</span></span>
<span id="L550"><span class="lineNum">     550</span>                 :             : {</span>
<span id="L551"><span class="lineNum">     551</span>                 :<span class="tlaGNC">        1230 :     return RPCHelpMan{&quot;listsinceblock&quot;,</span></span>
<span id="L552"><span class="lineNum">     552</span>                 :             :                 &quot;\nGet all transactions in blocks since block [blockhash], or all transactions if omitted.\n&quot;</span>
<span id="L553"><span class="lineNum">     553</span>                 :             :                 &quot;If \&quot;blockhash\&quot; is no longer a part of the main chain, transactions from the fork point onward are included.\n&quot;</span>
<span id="L554"><span class="lineNum">     554</span>                 :             :                 &quot;Additionally, if include_removed is set, transactions affecting the wallet which were removed are returned in the \&quot;removed\&quot; array.\n&quot;,</span>
<span id="L555"><span class="lineNum">     555</span>                 :             :                 {</span>
<span id="L556"><span class="lineNum">     556</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1230 :                     {&quot;blockhash&quot;, RPCArg::Type::STR, RPCArg::Optional::OMITTED, &quot;If set, the block hash to list transactions since, otherwise list all transactions.&quot;},</span></span>
<span id="L557"><span class="lineNum">     557</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2460 :                     {&quot;target_confirmations&quot;, RPCArg::Type::NUM, RPCArg::Default{1}, &quot;Return the nth block hash from the main chain. e.g. 1 would mean the best block hash. Note: this is not used as a filter, but only affects [lastblock] in the return value&quot;},</span></span>
<span id="L558"><span class="lineNum">     558</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2460 :                     {&quot;include_watchonly&quot;, RPCArg::Type::BOOL, RPCArg::DefaultHint{&quot;true for watch-only wallets, otherwise false&quot;}, &quot;Include transactions to watch-only addresses (see 'importaddress')&quot;},</span></span>
<span id="L559"><span class="lineNum">     559</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2460 :                     {&quot;include_removed&quot;, RPCArg::Type::BOOL, RPCArg::Default{true}, &quot;Show transactions that were removed due to a reorg in the \&quot;removed\&quot; array\n&quot;</span></span>
<span id="L560"><span class="lineNum">     560</span>                 :             :                                                                        &quot;(not guaranteed to work on pruned nodes)&quot;},</span>
<span id="L561"><span class="lineNum">     561</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2460 :                     {&quot;include_change&quot;, RPCArg::Type::BOOL, RPCArg::Default{false}, &quot;Also add entries for change outputs.\n&quot;},</span></span>
<span id="L562"><span class="lineNum">     562</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1230 :                     {&quot;label&quot;, RPCArg::Type::STR, RPCArg::Optional::OMITTED, &quot;Return only incoming transactions paying to addresses with the specified label.\n&quot;},</span></span>
<span id="L563"><span class="lineNum">     563</span>                 :             :                 },</span>
<span id="L564"><span class="lineNum">     564</span>                 :<span class="tlaUNC tlaBgUNC">           0 :                 RPCResult{</span></span>
<span id="L565"><span class="lineNum">     565</span>                 :             :                     RPCResult::Type::OBJ, &quot;&quot;, &quot;&quot;,</span>
<span id="L566"><span class="lineNum">     566</span>                 :             :                     {</span>
<span id="L567"><span class="lineNum">     567</span>                 :             :                         {RPCResult::Type::ARR, &quot;transactions&quot;, &quot;&quot;,</span>
<span id="L568"><span class="lineNum">     568</span>                 :             :                         {</span>
<span id="L569"><span class="lineNum">     569</span>   [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC tlaBgGNC">       19680 :                             {RPCResult::Type::OBJ, &quot;&quot;, &quot;&quot;, Cat(Cat&lt;std::vector&lt;RPCResult&gt;&gt;(</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 39 was not taken"> - </span><span class="tlaGBC" title="Branch 40 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 41 was not taken"> - </span><span class="tlaGBC" title="Branch 42 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 44 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaGBC" title="Branch 46 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span><span class="tlaGBC" title="Branch 48 was taken 7380 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 49 was taken 1230 times"> + </span><span class="tlaGBC" title="Branch 50 was taken 2460 times"> + </span><span class="tlaGBC" title="Branch 51 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 52 was not taken"> - </span><span class="tlaUNC" title="Branch 53 was not taken"> - </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 54 was not taken"> - </span><span class="tlaUNC" title="Branch 55 was not taken"> - </span>]
<span id="L570"><span class="lineNum">     570</span>                 :             :                             {</span>
<span id="L571"><span class="lineNum">     571</span>                 :             :                                 {RPCResult::Type::BOOL, &quot;involvesWatchonly&quot;, /*optional=*/true, &quot;Only returns true if imported addresses were involved in transaction.&quot;},</span>
<span id="L572"><span class="lineNum">     572</span>                 :             :                                 {RPCResult::Type::STR, &quot;address&quot;,  /*optional=*/true, &quot;The bitcoin address of the transaction (not returned if the output does not have an address, e.g. OP_RETURN null data).&quot;},</span>
<span id="L573"><span class="lineNum">     573</span>                 :             :                                 {RPCResult::Type::STR, &quot;category&quot;, &quot;The transaction category.\n&quot;</span>
<span id="L574"><span class="lineNum">     574</span>                 :             :                                     &quot;\&quot;send\&quot;                  Transactions sent.\n&quot;</span>
<span id="L575"><span class="lineNum">     575</span>                 :             :                                     &quot;\&quot;receive\&quot;               Non-coinbase transactions received.\n&quot;</span>
<span id="L576"><span class="lineNum">     576</span>                 :             :                                     &quot;\&quot;generate\&quot;              Coinbase transactions received with more than 100 confirmations.\n&quot;</span>
<span id="L577"><span class="lineNum">     577</span>                 :             :                                     &quot;\&quot;immature\&quot;              Coinbase transactions received with 100 or fewer confirmations.\n&quot;</span>
<span id="L578"><span class="lineNum">     578</span>                 :             :                                     &quot;\&quot;orphan\&quot;                Orphaned coinbase transactions received.&quot;},</span>
<span id="L579"><span class="lineNum">     579</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2460 :                                 {RPCResult::Type::STR_AMOUNT, &quot;amount&quot;, &quot;The amount in &quot; + CURRENCY_UNIT + &quot;. This is negative for the 'send' category, and is positive\n&quot;</span></span>
<span id="L580"><span class="lineNum">     580</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1230 :                                     &quot;for all other categories&quot;},</span></span>
<span id="L581"><span class="lineNum">     581</span>                 :             :                                 {RPCResult::Type::NUM, &quot;vout&quot;, &quot;the vout value&quot;},</span>
<span id="L582"><span class="lineNum">     582</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2460 :                                 {RPCResult::Type::STR_AMOUNT, &quot;fee&quot;, /*optional=*/true, &quot;The amount of the fee in &quot; + CURRENCY_UNIT + &quot;. This is negative and only available for the\n&quot;</span></span>
<span id="L583"><span class="lineNum">     583</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1230 :                                      &quot;'send' category of transactions.&quot;},</span></span>
<span id="L584"><span class="lineNum">     584</span>                 :             :                             },</span>
<span id="L585"><span class="lineNum">     585</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2460 :                             TransactionDescriptionString()),</span></span>
<span id="L586"><span class="lineNum">     586</span>                 :             :                             {</span>
<span id="L587"><span class="lineNum">     587</span>                 :             :                                 {RPCResult::Type::BOOL, &quot;abandoned&quot;, &quot;'true' if the transaction has been abandoned (inputs are respendable).&quot;},</span>
<span id="L588"><span class="lineNum">     588</span>                 :             :                                 {RPCResult::Type::STR, &quot;label&quot;, /*optional=*/true, &quot;A comment for the address/transaction, if any&quot;},</span>
<span id="L589"><span class="lineNum">     589</span>                 :             :                             })},</span>
<span id="L590"><span class="lineNum">     590</span>                 :             :                         }},</span>
<span id="L591"><span class="lineNum">     591</span>                 :             :                         {RPCResult::Type::ARR, &quot;removed&quot;, /*optional=*/true, &quot;&lt;structure is the same as \&quot;transactions\&quot; above, only present if include_removed=true&gt;\n&quot;</span>
<span id="L592"><span class="lineNum">     592</span>                 :             :                             &quot;Note: transactions that were re-added in the active chain will appear as-is in this array, and may thus have a positive confirmation count.&quot;</span>
<span id="L593"><span class="lineNum">     593</span>                 :             :                         , {{RPCResult::Type::ELISION, &quot;&quot;, &quot;&quot;},}},</span>
<span id="L594"><span class="lineNum">     594</span>                 :             :                         {RPCResult::Type::STR_HEX, &quot;lastblock&quot;, &quot;The hash of the block (target_confirmations-1) from the best block on the main chain, or the genesis hash if the referenced block does not exist yet. This is typically used to feed back into listsinceblock the next time you call it. So you would generally use a target_confirmations of say 6, so you will be continually re-notified of transactions until they've reached 6 confirmations plus any new ones&quot;},</span>
<span id="L595"><span class="lineNum">     595</span>                 :             :                     }</span>
<span id="L596"><span class="lineNum">     596</span>   [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       13530 :                 },</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 3690 times"> + </span><span class="tlaGBC" title="Branch 37 was taken 1230 times"> + </span><span class="tlaGBC" title="Branch 38 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 39 was taken 1230 times"> + </span><span class="tlaGBC" title="Branch 40 was taken 1230 times"> + </span><span class="tlaGBC" title="Branch 41 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 42 was not taken"> - </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span>    <span class="tlaUNC" title="Branch 44 was not taken"> - </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaUNC" title="Branch 46 was not taken"> - </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span>]
<span id="L597"><span class="lineNum">     597</span>                 :<span class="tlaGNC">        1230 :                 RPCExamples{</span></span>
<span id="L598"><span class="lineNum">     598</span>   [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2460 :                     HelpExampleCli(&quot;listsinceblock&quot;, &quot;&quot;)</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L599"><span class="lineNum">     599</span>   [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        4920 :             + HelpExampleCli(&quot;listsinceblock&quot;, &quot;\&quot;000000000000000bacf66f7497b7dc45ef753ee9a7d38571037cdb1a57f663ad\&quot; 6&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L600"><span class="lineNum">     600</span>   [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        4920 :             + HelpExampleRpc(&quot;listsinceblock&quot;, &quot;\&quot;000000000000000bacf66f7497b7dc45ef753ee9a7d38571037cdb1a57f663ad\&quot;, 6&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L601"><span class="lineNum">     601</span>         [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1230 :                 },</span></span>
<span id="L602"><span class="lineNum">     602</span>                 :<span class="tlaGNC">          68 :         [&amp;](const RPCHelpMan&amp; self, const JSONRPCRequest&amp; request) -&gt; UniValue</span></span>
<span id="L603"><span class="lineNum">     603</span>                 :             : {</span>
<span id="L604"><span class="lineNum">     604</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 68 times"> + </span>]:<span class="tlaGNC">          68 :     const std::shared_ptr&lt;const CWallet&gt; pwallet = GetWalletForJSONRPCRequest(request);</span></span>
<span id="L605"><span class="lineNum">     605</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 68 times"> + </span>]:<span class="tlaGNC">          68 :     if (!pwallet) return UniValue::VNULL;</span></span>
<span id="L606"><span class="lineNum">     606</span>                 :             : </span>
<span id="L607"><span class="lineNum">     607</span>         [<span class="tlaGBC" title="Branch 0 was taken 68 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          68 :     const CWallet&amp; wallet = *pwallet;</span></span>
<span id="L608"><span class="lineNum">     608</span>                 :             :     // Make sure the results are valid at least up to the most recent block</span>
<span id="L609"><span class="lineNum">     609</span>                 :             :     // the user could have gotten from another RPC command prior to now</span>
<span id="L610"><span class="lineNum">     610</span>         [<span class="tlaGBC" title="Branch 0 was taken 68 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          68 :     wallet.BlockUntilSyncedToCurrentChain();</span></span>
<span id="L611"><span class="lineNum">     611</span>                 :             : </span>
<span id="L612"><span class="lineNum">     612</span>         [<span class="tlaGBC" title="Branch 0 was taken 68 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          68 :     LOCK(wallet.cs_wallet);</span></span>
<span id="L613"><span class="lineNum">     613</span>                 :             : </span>
<span id="L614"><span class="lineNum">     614</span>                 :<span class="tlaGNC">          68 :     std::optional&lt;int&gt; height;    // Height of the specified block or the common ancestor, if the block provided was in a deactivated chain.</span></span>
<span id="L615"><span class="lineNum">     615</span>                 :<span class="tlaGNC">          68 :     std::optional&lt;int&gt; altheight; // Height of the specified block, even if it's in a deactivated chain.</span></span>
<span id="L616"><span class="lineNum">     616</span>                 :<span class="tlaGNC">          68 :     int target_confirms = 1;</span></span>
<span id="L617"><span class="lineNum">     617</span>                 :<span class="tlaGNC">          68 :     isminefilter filter = ISMINE_SPENDABLE;</span></span>
<span id="L618"><span class="lineNum">     618</span>                 :             : </span>
<span id="L619"><span class="lineNum">     619</span>                 :<span class="tlaGNC">          68 :     uint256 blockId;</span></span>
<span id="L620"><span class="lineNum">     620</span>   [<span class="tlaGBC" title="Branch 0 was taken 68 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 42 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 26 times"> + </span> :<span class="tlaGNC">          68 :     if (!request.params[0].isNull() &amp;&amp; !request.params[0].get_str().empty()) {</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 42 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 42 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 40 times"> + </span> 
<span class="lineNum">        </span>             <span class="tlaGBC" title="Branch 9 was taken 2 times"> + </span>]
<span id="L621"><span class="lineNum">     621</span>   [<span class="tlaGBC" title="Branch 0 was taken 40 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 36 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 4 times"> + </span>]:<span class="tlaGNC">          40 :         blockId = ParseHashV(request.params[0], &quot;blockhash&quot;);</span></span>
<span id="L622"><span class="lineNum">     622</span>                 :<span class="tlaGNC">          36 :         height = int{};</span></span>
<span id="L623"><span class="lineNum">     623</span>                 :<span class="tlaGNC">          36 :         altheight = int{};</span></span>
<span id="L624"><span class="lineNum">     624</span>   [<span class="tlaGBC" title="Branch 0 was taken 36 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 32 times"> + </span>]:<span class="tlaGNC">          36 :         if (!wallet.chain().findCommonAncestor(blockId, wallet.GetLastBlockHash(), /*ancestor_out=*/FoundBlock().height(*height), /*block1_out=*/FoundBlock().height(*altheight))) {</span></span>
<span id="L625"><span class="lineNum">     625</span>   [<span class="tlaGBC" title="Branch 0 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           8 :             throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, &quot;Block not found&quot;);</span></span>
<span id="L626"><span class="lineNum">     626</span>                 :             :         }</span>
<span id="L627"><span class="lineNum">     627</span>                 :             :     }</span>
<span id="L628"><span class="lineNum">     628</span>                 :             : </span>
<span id="L629"><span class="lineNum">     629</span>   [<span class="tlaGBC" title="Branch 0 was taken 60 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 8 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 52 times"> + </span>]:<span class="tlaGNC">          60 :     if (!request.params[1].isNull()) {</span></span>
<span id="L630"><span class="lineNum">     630</span>   [<span class="tlaGBC" title="Branch 0 was taken 8 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 8 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           8 :         target_confirms = request.params[1].getInt&lt;int&gt;();</span></span>
<span id="L631"><span class="lineNum">     631</span>                 :             : </span>
<span id="L632"><span class="lineNum">     632</span>         [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 6 times"> + </span>]:<span class="tlaGNC">           8 :         if (target_confirms &lt; 1) {</span></span>
<span id="L633"><span class="lineNum">     633</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :             throw JSONRPCError(RPC_INVALID_PARAMETER, &quot;Invalid parameter&quot;);</span></span>
<span id="L634"><span class="lineNum">     634</span>                 :             :         }</span>
<span id="L635"><span class="lineNum">     635</span>                 :             :     }</span>
<span id="L636"><span class="lineNum">     636</span>                 :             : </span>
<span id="L637"><span class="lineNum">     637</span>   [<span class="tlaGBC" title="Branch 0 was taken 58 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 58 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">          58 :     if (ParseIncludeWatchonly(request.params[2], wallet)) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 54 times"> + </span>]
<span id="L638"><span class="lineNum">     638</span>                 :<span class="tlaGNC">           4 :         filter |= ISMINE_WATCH_ONLY;</span></span>
<span id="L639"><span class="lineNum">     639</span>                 :             :     }</span>
<span id="L640"><span class="lineNum">     640</span>                 :             : </span>
<span id="L641"><span class="lineNum">     641</span>   [<span class="tlaGBC" title="Branch 0 was taken 58 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 54 times"> + </span> :<span class="tlaGNC">          58 :     bool include_removed = (request.params[3].isNull() || request.params[3].get_bool());</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 2 times"> + </span> 
<span class="lineNum">        </span>             <span class="tlaGBC" title="Branch 9 was taken 2 times"> + </span>]
<span id="L642"><span class="lineNum">     642</span>   [<span class="tlaGBC" title="Branch 0 was taken 58 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 54 times"> + </span> :<span class="tlaGNC">          58 :     bool include_change = (!request.params[4].isNull() &amp;&amp; request.params[4].get_bool());</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 2 times"> + </span> 
<span class="lineNum">        </span>             <span class="tlaGBC" title="Branch 9 was taken 2 times"> + </span>]
<span id="L643"><span class="lineNum">     643</span>                 :             : </span>
<span id="L644"><span class="lineNum">     644</span>                 :             :     // Only set it if 'label' was provided.</span>
<span id="L645"><span class="lineNum">     645</span>                 :<span class="tlaGNC">          58 :     std::optional&lt;std::string&gt; filter_label;</span></span>
<span id="L646"><span class="lineNum">     646</span>   [<span class="tlaGBC" title="Branch 0 was taken 58 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 6 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 52 times"> + </span> :<span class="tlaGNC">          58 :     if (!request.params[5].isNull()) filter_label.emplace(LabelFromValue(request.params[5]));</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 6 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 7 was taken 2 times"> + </span>]
<span id="L647"><span class="lineNum">     647</span>                 :             : </span>
<span id="L648"><span class="lineNum">     648</span>         [<span class="tlaGBC" title="Branch 0 was taken 28 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 28 times"> + </span>]:<span class="tlaGNC">          56 :     int depth = height ? wallet.GetLastBlockHeight() + 1 - *height : -1;</span></span>
<span id="L649"><span class="lineNum">     649</span>                 :             : </span>
<span id="L650"><span class="lineNum">     650</span>                 :<span class="tlaGNC">          56 :     UniValue transactions(UniValue::VARR);</span></span>
<span id="L651"><span class="lineNum">     651</span>                 :             : </span>
<span id="L652"><span class="lineNum">     652</span>         [<span class="tlaGBC" title="Branch 0 was taken 2596 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 56 times"> + </span>]:<span class="tlaGNC">        2652 :     for (const std::pair&lt;const uint256, CWalletTx&gt;&amp; pairWtx : wallet.mapWallet) {</span></span>
<span id="L653"><span class="lineNum">     653</span>                 :<span class="tlaGNC">        2596 :         const CWalletTx&amp; tx = pairWtx.second;</span></span>
<span id="L654"><span class="lineNum">     654</span>                 :             : </span>
<span id="L655"><span class="lineNum">     655</span>   [<span class="tlaGBC" title="Branch 0 was taken 1541 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 1055 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 1541 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2596 :         if (depth == -1 || abs(wallet.GetTxDepthInMainChain(tx)) &lt; depth) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 22 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 1519 times"> + </span>]
<span id="L656"><span class="lineNum">     656</span>         [<span class="tlaGBC" title="Branch 0 was taken 1077 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1077 :             ListTransactions(wallet, tx, 0, true, transactions, filter, filter_label, include_change);</span></span>
<span id="L657"><span class="lineNum">     657</span>                 :             :         }</span>
<span id="L658"><span class="lineNum">     658</span>                 :             :     }</span>
<span id="L659"><span class="lineNum">     659</span>                 :             : </span>
<span id="L660"><span class="lineNum">     660</span>                 :             :     // when a reorg'd block is requested, we also list any relevant transactions</span>
<span id="L661"><span class="lineNum">     661</span>                 :             :     // in the blocks of the chain that was detached</span>
<span id="L662"><span class="lineNum">     662</span>                 :<span class="tlaGNC">          56 :     UniValue removed(UniValue::VARR);</span></span>
<span id="L663"><span class="lineNum">     663</span>   [<span class="tlaGBC" title="Branch 0 was taken 78 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 50 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 28 times"> + </span> :<span class="tlaGNC">          80 :     while (include_removed &amp;&amp; altheight &amp;&amp; *altheight &gt; *height) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 24 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 26 times"> + </span>]
<span id="L664"><span class="lineNum">     664</span>                 :<span class="tlaGNC">          26 :         CBlock block;</span></span>
<span id="L665"><span class="lineNum">     665</span>   [<span class="tlaGBC" title="Branch 0 was taken 26 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 24 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 2 times"> + </span> :<span class="tlaGNC">          26 :         if (!wallet.chain().findBlock(blockId, FoundBlock().data(block)) || block.IsNull()) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 26 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L666"><span class="lineNum">     666</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :             throw JSONRPCError(RPC_INTERNAL_ERROR, &quot;Can't read block from disk&quot;);</span></span>
<span id="L667"><span class="lineNum">     667</span>                 :             :         }</span>
<span id="L668"><span class="lineNum">     668</span>         [<span class="tlaGBC" title="Branch 0 was taken 28 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 24 times"> + </span>]:<span class="tlaGNC">          52 :         for (const CTransactionRef&amp; tx : block.vtx) {</span></span>
<span id="L669"><span class="lineNum">     669</span>         [<span class="tlaGBC" title="Branch 0 was taken 28 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          28 :             auto it = wallet.mapWallet.find(tx-&gt;GetHash());</span></span>
<span id="L670"><span class="lineNum">     670</span>         [<span class="tlaGBC" title="Branch 0 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 24 times"> + </span>]:<span class="tlaGNC">          28 :             if (it != wallet.mapWallet.end()) {</span></span>
<span id="L671"><span class="lineNum">     671</span>                 :             :                 // We want all transactions regardless of confirmation count to appear here,</span>
<span id="L672"><span class="lineNum">     672</span>                 :             :                 // even negative confirmation ones, hence the big negative.</span>
<span id="L673"><span class="lineNum">     673</span>         [<span class="tlaGBC" title="Branch 0 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">           4 :                 ListTransactions(wallet, it-&gt;second, -100000000, true, removed, filter, filter_label, include_change);</span></span>
<span id="L674"><span class="lineNum">     674</span>                 :             :             }</span>
<span id="L675"><span class="lineNum">     675</span>                 :             :         }</span>
<span id="L676"><span class="lineNum">     676</span>                 :<span class="tlaGNC">          24 :         blockId = block.hashPrevBlock;</span></span>
<span id="L677"><span class="lineNum">     677</span>                 :<span class="tlaGNC">          24 :         --*altheight;</span></span>
<span id="L678"><span class="lineNum">     678</span>                 :<span class="tlaGNC">          26 :     }</span></span>
<span id="L679"><span class="lineNum">     679</span>                 :             : </span>
<span id="L680"><span class="lineNum">     680</span>                 :<span class="tlaGNC">          54 :     uint256 lastblock;</span></span>
<span id="L681"><span class="lineNum">     681</span>         [<span class="tlaGBC" title="Branch 0 was taken 52 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span>]:<span class="tlaGNC">          54 :     target_confirms = std::min(target_confirms, wallet.GetLastBlockHeight() + 1);</span></span>
<span id="L682"><span class="lineNum">     682</span>   [<span class="tlaGBC" title="Branch 0 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">          54 :     CHECK_NONFATAL(wallet.chain().findAncestorByHeight(wallet.GetLastBlockHash(), wallet.GetLastBlockHeight() + 1 - target_confirms, FoundBlock().hash(lastblock)));</span></span>
<span id="L683"><span class="lineNum">     683</span>                 :             : </span>
<span id="L684"><span class="lineNum">     684</span>                 :<span class="tlaGNC">          54 :     UniValue ret(UniValue::VOBJ);</span></span>
<span id="L685"><span class="lineNum">     685</span>   [<span class="tlaGBC" title="Branch 0 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">         108 :     ret.pushKV(&quot;transactions&quot;, std::move(transactions));</span></span>
<span id="L686"><span class="lineNum">     686</span>   [<span class="tlaGBC" title="Branch 0 was taken 52 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 2 was taken 52 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         106 :     if (include_removed) ret.pushKV(&quot;removed&quot;, std::move(removed));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 52 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L687"><span class="lineNum">     687</span>   [<span class="tlaGBC" title="Branch 0 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         108 :     ret.pushKV(&quot;lastblock&quot;, lastblock.GetHex());</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L688"><span class="lineNum">     688</span>                 :             : </span>
<span id="L689"><span class="lineNum">     689</span>                 :<span class="tlaGNC">          54 :     return ret;</span></span>
<span id="L690"><span class="lineNum">     690</span>         [<span class="tlaGBC" title="Branch 0 was taken 54 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         184 : },</span></span>
<span id="L691"><span class="lineNum">     691</span>   [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       39360 :     };</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 7380 times"> + </span><span class="tlaGBC" title="Branch 33 was taken 1230 times"> + </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 34 was not taken"> - </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span>]
<span id="L692"><span class="lineNum">     692</span>   [<span class="tlaGBC" title="Branch 0 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       33210 : }</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 1230 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 39 was not taken"> - </span><span class="tlaGBC" title="Branch 40 was taken 1230 times"> + </span><span class="tlaUNC" title="Branch 41 was not taken"> - </span><span class="tlaUNC" title="Branch 42 was not taken"> - </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 44 was not taken"> - </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaUNC" title="Branch 46 was not taken"> - </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span><span class="tlaUNC" title="Branch 48 was not taken"> - </span> 
<span class="lineNum">        </span>             <span class="tlaUNC" title="Branch 49 was not taken"> - </span>]
<span id="L693"><span class="lineNum">     693</span>                 :             : </span>
<span id="L694"><span class="lineNum">     694</span>                 :<span class="tlaGNC">        1847 : RPCHelpMan gettransaction()</span></span>
<span id="L695"><span class="lineNum">     695</span>                 :             : {</span>
<span id="L696"><span class="lineNum">     696</span>                 :<span class="tlaGNC">        1847 :     return RPCHelpMan{&quot;gettransaction&quot;,</span></span>
<span id="L697"><span class="lineNum">     697</span>                 :             :                 &quot;\nGet detailed information about in-wallet transaction &lt;txid&gt;\n&quot;,</span>
<span id="L698"><span class="lineNum">     698</span>                 :             :                 {</span>
<span id="L699"><span class="lineNum">     699</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1847 :                     {&quot;txid&quot;, RPCArg::Type::STR, RPCArg::Optional::NO, &quot;The transaction id&quot;},</span></span>
<span id="L700"><span class="lineNum">     700</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3694 :                     {&quot;include_watchonly&quot;, RPCArg::Type::BOOL, RPCArg::DefaultHint{&quot;true for watch-only wallets, otherwise false&quot;},</span></span>
<span id="L701"><span class="lineNum">     701</span>                 :             :                             &quot;Whether to include watch-only addresses in balance calculation and details[]&quot;},</span>
<span id="L702"><span class="lineNum">     702</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3694 :                     {&quot;verbose&quot;, RPCArg::Type::BOOL, RPCArg::Default{false},</span></span>
<span id="L703"><span class="lineNum">     703</span>                 :             :                             &quot;Whether to include a `decoded` field containing the decoded transaction (equivalent to RPC decoderawtransaction)&quot;},</span>
<span id="L704"><span class="lineNum">     704</span>                 :             :                 },</span>
<span id="L705"><span class="lineNum">     705</span>                 :<span class="tlaUNC tlaBgUNC">           0 :                 RPCResult{</span></span>
<span id="L706"><span class="lineNum">     706</span>   [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC tlaBgGNC">       60951 :                     RPCResult::Type::OBJ, &quot;&quot;, &quot;&quot;, Cat(Cat&lt;std::vector&lt;RPCResult&gt;&gt;(</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 39 was not taken"> - </span><span class="tlaGBC" title="Branch 40 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 41 was not taken"> - </span><span class="tlaGBC" title="Branch 42 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 44 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaGBC" title="Branch 46 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span><span class="tlaGBC" title="Branch 48 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 49 was not taken"> - </span><span class="tlaGBC" title="Branch 50 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 51 was not taken"> - </span><span class="tlaGBC" title="Branch 52 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 53 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 54 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 55 was not taken"> - </span><span class="tlaGBC" title="Branch 56 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 57 was not taken"> - </span><span class="tlaGBC" title="Branch 58 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 59 was not taken"> - </span><span class="tlaGBC" title="Branch 60 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 61 was not taken"> - </span><span class="tlaGBC" title="Branch 62 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 63 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 64 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 65 was not taken"> - </span><span class="tlaGBC" title="Branch 66 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 67 was not taken"> - </span><span class="tlaGBC" title="Branch 68 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 69 was not taken"> - </span><span class="tlaGBC" title="Branch 70 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 71 was not taken"> - </span><span class="tlaGBC" title="Branch 72 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 73 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 74 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 75 was not taken"> - </span><span class="tlaGBC" title="Branch 76 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 77 was not taken"> - </span><span class="tlaGBC" title="Branch 78 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 79 was not taken"> - </span><span class="tlaGBC" title="Branch 80 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 81 was not taken"> - </span><span class="tlaGBC" title="Branch 82 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 83 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 84 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 85 was not taken"> - </span><span class="tlaGBC" title="Branch 86 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 87 was not taken"> - </span><span class="tlaGBC" title="Branch 88 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 89 was not taken"> - </span><span class="tlaGBC" title="Branch 90 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 91 was not taken"> - </span><span class="tlaGBC" title="Branch 92 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 93 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 94 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 95 was not taken"> - </span><span class="tlaGBC" title="Branch 96 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 97 was not taken"> - </span><span class="tlaGBC" title="Branch 98 was taken 3694 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 99 was taken 1847 times"> + </span><span class="tlaGBC" title="Branch 100 was taken 7388 times"> + </span><span class="tlaGBC" title="Branch 101 was taken 1847 times"> + </span><span class="tlaGBC" title="Branch 102 was taken 1847 times"> + </span><span class="tlaGBC" title="Branch 103 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 104 was taken 1847 times"> + </span><span class="tlaGBC" title="Branch 105 was taken 1847 times"> + </span><span class="tlaGBC" title="Branch 106 was taken 16623 times"> + </span><span class="tlaGBC" title="Branch 107 was taken 1847 times"> + </span><span class="tlaGBC" title="Branch 108 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 109 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 110 was not taken"> - </span><span class="tlaUNC" title="Branch 111 was not taken"> - </span><span class="tlaUNC" title="Branch 112 was not taken"> - </span><span class="tlaUNC" title="Branch 113 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 114 was not taken"> - </span><span class="tlaUNC" title="Branch 115 was not taken"> - </span><span class="tlaUNC" title="Branch 116 was not taken"> - </span><span class="tlaUNC" title="Branch 117 was not taken"> - </span><span class="tlaUNC" title="Branch 118 was not taken"> - </span> 
<span class="lineNum">        </span>       <span class="tlaUNC" title="Branch 119 was not taken"> - </span><span class="tlaUNC" title="Branch 120 was not taken"> - </span><span class="tlaUNC" title="Branch 121 was not taken"> - </span>]
<span id="L707"><span class="lineNum">     707</span>                 :             :                     {</span>
<span id="L708"><span class="lineNum">     708</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3694 :                         {RPCResult::Type::STR_AMOUNT, &quot;amount&quot;, &quot;The amount in &quot; + CURRENCY_UNIT},</span></span>
<span id="L709"><span class="lineNum">     709</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3694 :                         {RPCResult::Type::STR_AMOUNT, &quot;fee&quot;, /*optional=*/true, &quot;The amount of the fee in &quot; + CURRENCY_UNIT + &quot;. This is negative and only available for the\n&quot;</span></span>
<span id="L710"><span class="lineNum">     710</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1847 :                                      &quot;'send' category of transactions.&quot;},</span></span>
<span id="L711"><span class="lineNum">     711</span>                 :             :                     },</span>
<span id="L712"><span class="lineNum">     712</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3694 :                     TransactionDescriptionString()),</span></span>
<span id="L713"><span class="lineNum">     713</span>                 :             :                     {</span>
<span id="L714"><span class="lineNum">     714</span>                 :             :                         {RPCResult::Type::ARR, &quot;details&quot;, &quot;&quot;,</span>
<span id="L715"><span class="lineNum">     715</span>                 :             :                         {</span>
<span id="L716"><span class="lineNum">     716</span>                 :             :                             {RPCResult::Type::OBJ, &quot;&quot;, &quot;&quot;,</span>
<span id="L717"><span class="lineNum">     717</span>                 :             :                             {</span>
<span id="L718"><span class="lineNum">     718</span>                 :             :                                 {RPCResult::Type::BOOL, &quot;involvesWatchonly&quot;, /*optional=*/true, &quot;Only returns true if imported addresses were involved in transaction.&quot;},</span>
<span id="L719"><span class="lineNum">     719</span>                 :             :                                 {RPCResult::Type::STR, &quot;address&quot;, /*optional=*/true, &quot;The bitcoin address involved in the transaction.&quot;},</span>
<span id="L720"><span class="lineNum">     720</span>                 :             :                                 {RPCResult::Type::STR, &quot;category&quot;, &quot;The transaction category.\n&quot;</span>
<span id="L721"><span class="lineNum">     721</span>                 :             :                                     &quot;\&quot;send\&quot;                  Transactions sent.\n&quot;</span>
<span id="L722"><span class="lineNum">     722</span>                 :             :                                     &quot;\&quot;receive\&quot;               Non-coinbase transactions received.\n&quot;</span>
<span id="L723"><span class="lineNum">     723</span>                 :             :                                     &quot;\&quot;generate\&quot;              Coinbase transactions received with more than 100 confirmations.\n&quot;</span>
<span id="L724"><span class="lineNum">     724</span>                 :             :                                     &quot;\&quot;immature\&quot;              Coinbase transactions received with 100 or fewer confirmations.\n&quot;</span>
<span id="L725"><span class="lineNum">     725</span>                 :             :                                     &quot;\&quot;orphan\&quot;                Orphaned coinbase transactions received.&quot;},</span>
<span id="L726"><span class="lineNum">     726</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3694 :                                 {RPCResult::Type::STR_AMOUNT, &quot;amount&quot;, &quot;The amount in &quot; + CURRENCY_UNIT},</span></span>
<span id="L727"><span class="lineNum">     727</span>                 :             :                                 {RPCResult::Type::STR, &quot;label&quot;, /*optional=*/true, &quot;A comment for the address/transaction, if any&quot;},</span>
<span id="L728"><span class="lineNum">     728</span>                 :             :                                 {RPCResult::Type::NUM, &quot;vout&quot;, &quot;the vout value&quot;},</span>
<span id="L729"><span class="lineNum">     729</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        3694 :                                 {RPCResult::Type::STR_AMOUNT, &quot;fee&quot;, /*optional=*/true, &quot;The amount of the fee in &quot; + CURRENCY_UNIT + &quot;. This is negative and only available for the \n&quot;</span></span>
<span id="L730"><span class="lineNum">     730</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1847 :                                     &quot;'send' category of transactions.&quot;},</span></span>
<span id="L731"><span class="lineNum">     731</span>                 :             :                                 {RPCResult::Type::BOOL, &quot;abandoned&quot;, &quot;'true' if the transaction has been abandoned (inputs are respendable).&quot;},</span>
<span id="L732"><span class="lineNum">     732</span>                 :             :                                 {RPCResult::Type::ARR, &quot;parent_descs&quot;, /*optional=*/true, &quot;Only if 'category' is 'received'. List of parent descriptors for the output script of this coin.&quot;, {</span>
<span id="L733"><span class="lineNum">     733</span>                 :             :                                     {RPCResult::Type::STR, &quot;desc&quot;, &quot;The descriptor string.&quot;},</span>
<span id="L734"><span class="lineNum">     734</span>                 :             :                                 }},</span>
<span id="L735"><span class="lineNum">     735</span>                 :             :                             }},</span>
<span id="L736"><span class="lineNum">     736</span>                 :             :                         }},</span>
<span id="L737"><span class="lineNum">     737</span>                 :             :                         {RPCResult::Type::STR_HEX, &quot;hex&quot;, &quot;Raw data for transaction&quot;},</span>
<span id="L738"><span class="lineNum">     738</span>                 :             :                         {RPCResult::Type::OBJ, &quot;decoded&quot;, /*optional=*/true, &quot;The decoded transaction (only present when `verbose` is passed)&quot;,</span>
<span id="L739"><span class="lineNum">     739</span>                 :             :                         {</span>
<span id="L740"><span class="lineNum">     740</span>                 :             :                             {RPCResult::Type::ELISION, &quot;&quot;, &quot;Equivalent to the RPC decoderawtransaction method, or the RPC getrawtransaction method when `verbose` is passed.&quot;},</span>
<span id="L741"><span class="lineNum">     741</span>                 :             :                         }},</span>
<span id="L742"><span class="lineNum">     742</span>                 :             :                         RESULT_LAST_PROCESSED_BLOCK,</span>
<span id="L743"><span class="lineNum">     743</span>                 :             :                     })</span>
<span id="L744"><span class="lineNum">     744</span>   [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        5541 :                 },</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L745"><span class="lineNum">     745</span>                 :<span class="tlaGNC">        1847 :                 RPCExamples{</span></span>
<span id="L746"><span class="lineNum">     746</span>   [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        3694 :                     HelpExampleCli(&quot;gettransaction&quot;, &quot;\&quot;1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d\&quot;&quot;)</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L747"><span class="lineNum">     747</span>   [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7388 :             + HelpExampleCli(&quot;gettransaction&quot;, &quot;\&quot;1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d\&quot; true&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L748"><span class="lineNum">     748</span>   [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7388 :             + HelpExampleCli(&quot;gettransaction&quot;, &quot;\&quot;1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d\&quot; false true&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L749"><span class="lineNum">     749</span>   [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        7388 :             + HelpExampleRpc(&quot;gettransaction&quot;, &quot;\&quot;1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d\&quot;&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L750"><span class="lineNum">     750</span>         [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1847 :                 },</span></span>
<span id="L751"><span class="lineNum">     751</span>                 :<span class="tlaGNC">         685 :         [&amp;](const RPCHelpMan&amp; self, const JSONRPCRequest&amp; request) -&gt; UniValue</span></span>
<span id="L752"><span class="lineNum">     752</span>                 :             : {</span>
<span id="L753"><span class="lineNum">     753</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 685 times"> + </span>]:<span class="tlaGNC">         685 :     const std::shared_ptr&lt;const CWallet&gt; pwallet = GetWalletForJSONRPCRequest(request);</span></span>
<span id="L754"><span class="lineNum">     754</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 685 times"> + </span>]:<span class="tlaGNC">         685 :     if (!pwallet) return UniValue::VNULL;</span></span>
<span id="L755"><span class="lineNum">     755</span>                 :             : </span>
<span id="L756"><span class="lineNum">     756</span>                 :             :     // Make sure the results are valid at least up to the most recent block</span>
<span id="L757"><span class="lineNum">     757</span>                 :             :     // the user could have gotten from another RPC command prior to now</span>
<span id="L758"><span class="lineNum">     758</span>         [<span class="tlaGBC" title="Branch 0 was taken 685 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         685 :     pwallet-&gt;BlockUntilSyncedToCurrentChain();</span></span>
<span id="L759"><span class="lineNum">     759</span>                 :             : </span>
<span id="L760"><span class="lineNum">     760</span>         [<span class="tlaGBC" title="Branch 0 was taken 685 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         685 :     LOCK(pwallet-&gt;cs_wallet);</span></span>
<span id="L761"><span class="lineNum">     761</span>                 :             : </span>
<span id="L762"><span class="lineNum">     762</span>   [<span class="tlaGBC" title="Branch 0 was taken 685 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 685 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">         685 :     uint256 hash(ParseHashV(request.params[0], &quot;txid&quot;));</span></span>
<span id="L763"><span class="lineNum">     763</span>                 :             : </span>
<span id="L764"><span class="lineNum">     764</span>                 :<span class="tlaGNC">         685 :     isminefilter filter = ISMINE_SPENDABLE;</span></span>
<span id="L765"><span class="lineNum">     765</span>                 :             : </span>
<span id="L766"><span class="lineNum">     766</span>   [<span class="tlaGBC" title="Branch 0 was taken 685 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 685 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">         685 :     if (ParseIncludeWatchonly(request.params[1], *pwallet)) {</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 110 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 575 times"> + </span>]
<span id="L767"><span class="lineNum">     767</span>                 :<span class="tlaGNC">         110 :         filter |= ISMINE_WATCH_ONLY;</span></span>
<span id="L768"><span class="lineNum">     768</span>                 :             :     }</span>
<span id="L769"><span class="lineNum">     769</span>                 :             : </span>
<span id="L770"><span class="lineNum">     770</span>   [<span class="tlaGBC" title="Branch 0 was taken 685 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 121 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 564 times"> + </span> :<span class="tlaGNC">         685 :     bool verbose = request.params[2].isNull() ? false : request.params[2].get_bool();</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 121 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 121 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L771"><span class="lineNum">     771</span>                 :             : </span>
<span id="L772"><span class="lineNum">     772</span>                 :<span class="tlaGNC">         685 :     UniValue entry(UniValue::VOBJ);</span></span>
<span id="L773"><span class="lineNum">     773</span>         [<span class="tlaGBC" title="Branch 0 was taken 685 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         685 :     auto it = pwallet-&gt;mapWallet.find(hash);</span></span>
<span id="L774"><span class="lineNum">     774</span>         [<span class="tlaGBC" title="Branch 0 was taken 8 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 677 times"> + </span>]:<span class="tlaGNC">         685 :     if (it == pwallet-&gt;mapWallet.end()) {</span></span>
<span id="L775"><span class="lineNum">     775</span>   [<span class="tlaGBC" title="Branch 0 was taken 8 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 8 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">          16 :         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, &quot;Invalid or non-wallet transaction id&quot;);</span></span>
<span id="L776"><span class="lineNum">     776</span>                 :             :     }</span>
<span id="L777"><span class="lineNum">     777</span>         [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         677 :     const CWalletTx&amp; wtx = it-&gt;second;</span></span>
<span id="L778"><span class="lineNum">     778</span>                 :             : </span>
<span id="L779"><span class="lineNum">     779</span>         [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         677 :     CAmount nCredit = CachedTxGetCredit(*pwallet, wtx, filter);</span></span>
<span id="L780"><span class="lineNum">     780</span>         [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         677 :     CAmount nDebit = CachedTxGetDebit(*pwallet, wtx, filter);</span></span>
<span id="L781"><span class="lineNum">     781</span>                 :<span class="tlaGNC">         677 :     CAmount nNet = nCredit - nDebit;</span></span>
<span id="L782"><span class="lineNum">     782</span>   [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 552 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 125 times"> + </span> :<span class="tlaGNC">         677 :     CAmount nFee = (CachedTxIsFromMe(*pwallet, wtx, filter) ? wtx.tx-&gt;GetValueOut() - nDebit : 0);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 552 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L783"><span class="lineNum">     783</span>                 :             : </span>
<span id="L784"><span class="lineNum">     784</span>   [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        1354 :     entry.pushKV(&quot;amount&quot;, ValueFromAmount(nNet - nFee));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L785"><span class="lineNum">     785</span>   [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 552 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 125 times"> + </span>]:<span class="tlaGNC">         677 :     if (CachedTxIsFromMe(*pwallet, wtx, filter))</span></span>
<span id="L786"><span class="lineNum">     786</span>   [<span class="tlaGBC" title="Branch 0 was taken 552 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 552 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        1104 :         entry.pushKV(&quot;fee&quot;, ValueFromAmount(nFee));</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 552 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L787"><span class="lineNum">     787</span>                 :             : </span>
<span id="L788"><span class="lineNum">     788</span>         [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         677 :     WalletTxToJSON(*pwallet, wtx, entry);</span></span>
<span id="L789"><span class="lineNum">     789</span>                 :             : </span>
<span id="L790"><span class="lineNum">     790</span>                 :<span class="tlaGNC">         677 :     UniValue details(UniValue::VARR);</span></span>
<span id="L791"><span class="lineNum">     791</span>         [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         677 :     ListTransactions(*pwallet, wtx, 0, false, details, filter, /*filter_label=*/std::nullopt);</span></span>
<span id="L792"><span class="lineNum">     792</span>   [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        1354 :     entry.pushKV(&quot;details&quot;, std::move(details));</span></span>
<span id="L793"><span class="lineNum">     793</span>                 :             : </span>
<span id="L794"><span class="lineNum">     794</span>   [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        1354 :     entry.pushKV(&quot;hex&quot;, EncodeHexTx(*wtx.tx));</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L795"><span class="lineNum">     795</span>                 :             : </span>
<span id="L796"><span class="lineNum">     796</span>         [<span class="tlaGBC" title="Branch 0 was taken 119 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 558 times"> + </span>]:<span class="tlaGNC">         677 :     if (verbose) {</span></span>
<span id="L797"><span class="lineNum">     797</span>                 :<span class="tlaGNC">         119 :         UniValue decoded(UniValue::VOBJ);</span></span>
<span id="L798"><span class="lineNum">     798</span>         [<span class="tlaGBC" title="Branch 0 was taken 119 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         119 :         TxToUniv(*wtx.tx, /*block_hash=*/uint256(), /*entry=*/decoded, /*include_hex=*/false);</span></span>
<span id="L799"><span class="lineNum">     799</span>   [<span class="tlaGBC" title="Branch 0 was taken 119 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 119 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">         238 :         entry.pushKV(&quot;decoded&quot;, std::move(decoded));</span></span>
<span id="L800"><span class="lineNum">     800</span>                 :<span class="tlaGNC">         119 :     }</span></span>
<span id="L801"><span class="lineNum">     801</span>                 :             : </span>
<span id="L802"><span class="lineNum">     802</span>         [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">         677 :     AppendLastProcessedBlock(entry, *pwallet);</span></span>
<span id="L803"><span class="lineNum">     803</span>                 :<span class="tlaGNC">         677 :     return entry;</span></span>
<span id="L804"><span class="lineNum">     804</span>         [<span class="tlaGBC" title="Branch 0 was taken 677 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2047 : },</span></span>
<span id="L805"><span class="lineNum">     805</span>   [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       35093 :     };</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1847 times"> + </span> 
<span class="lineNum">        </span>    <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 5541 times"> + </span><span class="tlaGBC" title="Branch 21 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 22 was not taken"> - </span> 
<span class="lineNum">        </span>             <span class="tlaUNC" title="Branch 23 was not taken"> - </span>]
<span id="L806"><span class="lineNum">     806</span>   [<span class="tlaGBC" title="Branch 0 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       48022 : }</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 21 was not taken"> - </span><span class="tlaGBC" title="Branch 22 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 23 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 24 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 25 was not taken"> - </span><span class="tlaGBC" title="Branch 26 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 27 was not taken"> - </span><span class="tlaGBC" title="Branch 28 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 29 was not taken"> - </span><span class="tlaGBC" title="Branch 30 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 31 was not taken"> - </span><span class="tlaGBC" title="Branch 32 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 33 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 34 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 35 was not taken"> - </span><span class="tlaGBC" title="Branch 36 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 37 was not taken"> - </span><span class="tlaGBC" title="Branch 38 was taken 1847 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 39 was not taken"> - </span><span class="tlaGBC" title="Branch 40 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 41 was not taken"> - </span><span class="tlaGBC" title="Branch 42 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 43 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 44 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 45 was not taken"> - </span><span class="tlaGBC" title="Branch 46 was taken 1847 times"> + </span><span class="tlaUNC" title="Branch 47 was not taken"> - </span><span class="tlaUNC" title="Branch 48 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 49 was not taken"> - </span><span class="tlaUNC" title="Branch 50 was not taken"> - </span><span class="tlaUNC" title="Branch 51 was not taken"> - </span><span class="tlaUNC" title="Branch 52 was not taken"> - </span><span class="tlaUNC" title="Branch 53 was not taken"> - </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 54 was not taken"> - </span><span class="tlaUNC" title="Branch 55 was not taken"> - </span>]
<span id="L807"><span class="lineNum">     807</span>                 :             : </span>
<span id="L808"><span class="lineNum">     808</span>                 :<span class="tlaGNC">        1176 : RPCHelpMan abandontransaction()</span></span>
<span id="L809"><span class="lineNum">     809</span>                 :             : {</span>
<span id="L810"><span class="lineNum">     810</span>                 :<span class="tlaGNC">        1176 :     return RPCHelpMan{&quot;abandontransaction&quot;,</span></span>
<span id="L811"><span class="lineNum">     811</span>                 :             :                 &quot;\nMark in-wallet transaction &lt;txid&gt; as abandoned\n&quot;</span>
<span id="L812"><span class="lineNum">     812</span>                 :             :                 &quot;This will mark this transaction and all its in-wallet descendants as abandoned which will allow\n&quot;</span>
<span id="L813"><span class="lineNum">     813</span>                 :             :                 &quot;for their inputs to be respent.  It can be used to replace \&quot;stuck\&quot; or evicted transactions.\n&quot;</span>
<span id="L814"><span class="lineNum">     814</span>                 :             :                 &quot;It only works on transactions which are not included in a block and are not currently in the mempool.\n&quot;</span>
<span id="L815"><span class="lineNum">     815</span>                 :             :                 &quot;It has no effect on transactions which are already abandoned.\n&quot;,</span>
<span id="L816"><span class="lineNum">     816</span>                 :             :                 {</span>
<span id="L817"><span class="lineNum">     817</span>         [<span class="tlaGBC" title="Branch 0 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1176 :                     {&quot;txid&quot;, RPCArg::Type::STR_HEX, RPCArg::Optional::NO, &quot;The transaction id&quot;},</span></span>
<span id="L818"><span class="lineNum">     818</span>                 :             :                 },</span>
<span id="L819"><span class="lineNum">     819</span>   [<span class="tlaGBC" title="Branch 0 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2352 :                 RPCResult{RPCResult::Type::NONE, &quot;&quot;, &quot;&quot;},</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L820"><span class="lineNum">     820</span>                 :<span class="tlaGNC">        1176 :                 RPCExamples{</span></span>
<span id="L821"><span class="lineNum">     821</span>   [<span class="tlaGBC" title="Branch 0 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2352 :                     HelpExampleCli(&quot;abandontransaction&quot;, &quot;\&quot;1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d\&quot;&quot;)</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L822"><span class="lineNum">     822</span>   [<span class="tlaGBC" title="Branch 0 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        4704 :             + HelpExampleRpc(&quot;abandontransaction&quot;, &quot;\&quot;1075db55d416d3ca199f55b6084e2115b9345e16c5cf302fc80e9d5fbf5d48d\&quot;&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L823"><span class="lineNum">     823</span>         [<span class="tlaGBC" title="Branch 0 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1176 :                 },</span></span>
<span id="L824"><span class="lineNum">     824</span>                 :<span class="tlaGNC">          14 :         [&amp;](const RPCHelpMan&amp; self, const JSONRPCRequest&amp; request) -&gt; UniValue</span></span>
<span id="L825"><span class="lineNum">     825</span>                 :             : {</span>
<span id="L826"><span class="lineNum">     826</span>                 :<span class="tlaGNC">          14 :     std::shared_ptr&lt;CWallet&gt; const pwallet = GetWalletForJSONRPCRequest(request);</span></span>
<span id="L827"><span class="lineNum">     827</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 14 times"> + </span>]:<span class="tlaGNC">          14 :     if (!pwallet) return UniValue::VNULL;</span></span>
<span id="L828"><span class="lineNum">     828</span>                 :             : </span>
<span id="L829"><span class="lineNum">     829</span>                 :             :     // Make sure the results are valid at least up to the most recent block</span>
<span id="L830"><span class="lineNum">     830</span>                 :             :     // the user could have gotten from another RPC command prior to now</span>
<span id="L831"><span class="lineNum">     831</span>         [<span class="tlaGBC" title="Branch 0 was taken 14 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          14 :     pwallet-&gt;BlockUntilSyncedToCurrentChain();</span></span>
<span id="L832"><span class="lineNum">     832</span>                 :             : </span>
<span id="L833"><span class="lineNum">     833</span>         [<span class="tlaGBC" title="Branch 0 was taken 14 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          14 :     LOCK(pwallet-&gt;cs_wallet);</span></span>
<span id="L834"><span class="lineNum">     834</span>                 :             : </span>
<span id="L835"><span class="lineNum">     835</span>   [<span class="tlaGBC" title="Branch 0 was taken 14 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 14 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">          14 :     uint256 hash(ParseHashV(request.params[0], &quot;txid&quot;));</span></span>
<span id="L836"><span class="lineNum">     836</span>                 :             : </span>
<span id="L837"><span class="lineNum">     837</span>   [<span class="tlaGBC" title="Branch 0 was taken 14 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 12 times"> + </span>]:<span class="tlaGNC">          14 :     if (!pwallet-&gt;mapWallet.count(hash)) {</span></span>
<span id="L838"><span class="lineNum">     838</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, &quot;Invalid or non-wallet transaction id&quot;);</span></span>
<span id="L839"><span class="lineNum">     839</span>                 :             :     }</span>
<span id="L840"><span class="lineNum">     840</span>   [<span class="tlaGBC" title="Branch 0 was taken 12 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 8 times"> + </span>]:<span class="tlaGNC">          12 :     if (!pwallet-&gt;AbandonTransaction(hash)) {</span></span>
<span id="L841"><span class="lineNum">     841</span>   [<span class="tlaGBC" title="Branch 0 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           8 :         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, &quot;Transaction not eligible for abandonment&quot;);</span></span>
<span id="L842"><span class="lineNum">     842</span>                 :             :     }</span>
<span id="L843"><span class="lineNum">     843</span>                 :             : </span>
<span id="L844"><span class="lineNum">     844</span>         [<span class="tlaGBC" title="Branch 0 was taken 8 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">           8 :     return UniValue::VNULL;</span></span>
<span id="L845"><span class="lineNum">     845</span>                 :<span class="tlaGNC">          22 : },</span></span>
<span id="L846"><span class="lineNum">     846</span>   [<span class="tlaGBC" title="Branch 0 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       10584 :     };</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1176 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1176 times"> + </span><span class="tlaGBC" title="Branch 13 was taken 1176 times"> + </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 14 was not taken"> - </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span>]
<span id="L847"><span class="lineNum">     847</span>   [<span class="tlaGBC" title="Branch 0 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1176 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">        3528 : }</span></span>
<span id="L848"><span class="lineNum">     848</span>                 :             : </span>
<span id="L849"><span class="lineNum">     849</span>                 :<span class="tlaGNC">        1187 : RPCHelpMan rescanblockchain()</span></span>
<span id="L850"><span class="lineNum">     850</span>                 :             : {</span>
<span id="L851"><span class="lineNum">     851</span>                 :<span class="tlaGNC">        1187 :     return RPCHelpMan{&quot;rescanblockchain&quot;,</span></span>
<span id="L852"><span class="lineNum">     852</span>                 :             :                 &quot;\nRescan the local blockchain for wallet related transactions.\n&quot;</span>
<span id="L853"><span class="lineNum">     853</span>                 :             :                 &quot;Note: Use \&quot;getwalletinfo\&quot; to query the scanning progress.\n&quot;</span>
<span id="L854"><span class="lineNum">     854</span>                 :             :                 &quot;The rescan is significantly faster when used on a descriptor wallet\n&quot;</span>
<span id="L855"><span class="lineNum">     855</span>                 :             :                 &quot;and block filters are available (using startup option \&quot;-blockfilterindex=1\&quot;).\n&quot;,</span>
<span id="L856"><span class="lineNum">     856</span>                 :             :                 {</span>
<span id="L857"><span class="lineNum">     857</span>         [<span class="tlaGBC" title="Branch 0 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        2374 :                     {&quot;start_height&quot;, RPCArg::Type::NUM, RPCArg::Default{0}, &quot;block height where the rescan should start&quot;},</span></span>
<span id="L858"><span class="lineNum">     858</span>         [<span class="tlaGBC" title="Branch 0 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1187 :                     {&quot;stop_height&quot;, RPCArg::Type::NUM, RPCArg::Optional::OMITTED, &quot;the last block height that should be scanned. If none is provided it will rescan up to the tip at return time of this call.&quot;},</span></span>
<span id="L859"><span class="lineNum">     859</span>                 :             :                 },</span>
<span id="L860"><span class="lineNum">     860</span>                 :<span class="tlaUNC tlaBgUNC">           0 :                 RPCResult{</span></span>
<span id="L861"><span class="lineNum">     861</span>                 :             :                     RPCResult::Type::OBJ, &quot;&quot;, &quot;&quot;,</span>
<span id="L862"><span class="lineNum">     862</span>                 :             :                     {</span>
<span id="L863"><span class="lineNum">     863</span>                 :             :                         {RPCResult::Type::NUM, &quot;start_height&quot;, &quot;The block height where the rescan started (the requested height or 0)&quot;},</span>
<span id="L864"><span class="lineNum">     864</span>                 :             :                         {RPCResult::Type::NUM, &quot;stop_height&quot;, &quot;The height of the last rescanned block. May be null in rare cases if there was a reorg and the call didn't scan any blocks because they were already scanned in the background.&quot;},</span>
<span id="L865"><span class="lineNum">     865</span>                 :             :                     }</span>
<span id="L866"><span class="lineNum">     866</span>   [<span class="tlaGBC" title="Branch 0 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC tlaBgGNC">        4748 :                 },</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1187 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 17 was not taken"> - </span><span class="tlaGBC" title="Branch 18 was taken 1187 times"> + </span> 
<span class="lineNum">        </span>    <span class="tlaUNC" title="Branch 19 was not taken"> - </span><span class="tlaGBC" title="Branch 20 was taken 2374 times"> + </span><span class="tlaGBC" title="Branch 21 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 22 was not taken"> - </span> 
<span class="lineNum">        </span>             <span class="tlaUNC" title="Branch 23 was not taken"> - </span>]
<span id="L867"><span class="lineNum">     867</span>                 :<span class="tlaGNC">        1187 :                 RPCExamples{</span></span>
<span id="L868"><span class="lineNum">     868</span>   [<span class="tlaGBC" title="Branch 0 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2374 :                     HelpExampleCli(&quot;rescanblockchain&quot;, &quot;100000 120000&quot;)</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L869"><span class="lineNum">     869</span>   [<span class="tlaGBC" title="Branch 0 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        4748 :             + HelpExampleRpc(&quot;rescanblockchain&quot;, &quot;100000, 120000&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L870"><span class="lineNum">     870</span>         [<span class="tlaGBC" title="Branch 0 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1187 :                 },</span></span>
<span id="L871"><span class="lineNum">     871</span>                 :<span class="tlaGNC">          25 :         [&amp;](const RPCHelpMan&amp; self, const JSONRPCRequest&amp; request) -&gt; UniValue</span></span>
<span id="L872"><span class="lineNum">     872</span>                 :             : {</span>
<span id="L873"><span class="lineNum">     873</span>                 :<span class="tlaGNC">          25 :     std::shared_ptr&lt;CWallet&gt; const pwallet = GetWalletForJSONRPCRequest(request);</span></span>
<span id="L874"><span class="lineNum">     874</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 25 times"> + </span>]:<span class="tlaGNC">          25 :     if (!pwallet) return UniValue::VNULL;</span></span>
<span id="L875"><span class="lineNum">     875</span>         [<span class="tlaGBC" title="Branch 0 was taken 25 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          25 :     CWallet&amp; wallet{*pwallet};</span></span>
<span id="L876"><span class="lineNum">     876</span>                 :             : </span>
<span id="L877"><span class="lineNum">     877</span>                 :             :     // Make sure the results are valid at least up to the most recent block</span>
<span id="L878"><span class="lineNum">     878</span>                 :             :     // the user could have gotten from another RPC command prior to now</span>
<span id="L879"><span class="lineNum">     879</span>         [<span class="tlaGBC" title="Branch 0 was taken 25 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          25 :     wallet.BlockUntilSyncedToCurrentChain();</span></span>
<span id="L880"><span class="lineNum">     880</span>                 :             : </span>
<span id="L881"><span class="lineNum">     881</span>                 :<span class="tlaGNC">          25 :     WalletRescanReserver reserver(*pwallet);</span></span>
<span id="L882"><span class="lineNum">     882</span>         [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaGBC" title="Branch 1 was taken 25 times"> + </span>]:<span class="tlaGNC">          25 :     if (!reserver.reserve(/*with_passphrase=*/true)) {</span></span>
<span id="L883"><span class="lineNum">     883</span>   [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span><span class="tlaUNC" title="Branch 2 was not executed"> # </span><span class="tlaUNC" title="Branch 3 was not executed"> # </span>]:<span class="tlaUNC tlaBgUNC">           0 :         throw JSONRPCError(RPC_WALLET_ERROR, &quot;Wallet is currently rescanning. Abort existing rescan or wait.&quot;);</span></span>
<span id="L884"><span class="lineNum">     884</span>                 :             :     }</span>
<span id="L885"><span class="lineNum">     885</span>                 :             : </span>
<span id="L886"><span class="lineNum">     886</span>                 :<span class="tlaGNC tlaBgGNC">          25 :     int start_height = 0;</span></span>
<span id="L887"><span class="lineNum">     887</span>                 :<span class="tlaGNC">          25 :     std::optional&lt;int&gt; stop_height;</span></span>
<span id="L888"><span class="lineNum">     888</span>                 :<span class="tlaGNC">          25 :     uint256 start_block;</span></span>
<span id="L889"><span class="lineNum">     889</span>                 :             : </span>
<span id="L890"><span class="lineNum">     890</span>         [<span class="tlaGBC" title="Branch 0 was taken 25 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          25 :     LOCK(pwallet-&gt;m_relock_mutex);</span></span>
<span id="L891"><span class="lineNum">     891</span>                 :<span class="tlaGNC">          25 :     {</span></span>
<span id="L892"><span class="lineNum">     892</span>         [<span class="tlaGBC" title="Branch 0 was taken 25 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          25 :         LOCK(pwallet-&gt;cs_wallet);</span></span>
<span id="L893"><span class="lineNum">     893</span>         [<span class="tlaGBC" title="Branch 0 was taken 23 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span>]:<span class="tlaGNC">          25 :         EnsureWalletIsUnlocked(*pwallet);</span></span>
<span id="L894"><span class="lineNum">     894</span>                 :<span class="tlaGNC">          23 :         int tip_height = pwallet-&gt;GetLastBlockHeight();</span></span>
<span id="L895"><span class="lineNum">     895</span>                 :             : </span>
<span id="L896"><span class="lineNum">     896</span>   [<span class="tlaGBC" title="Branch 0 was taken 23 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 10 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 13 times"> + </span>]:<span class="tlaGNC">          23 :         if (!request.params[0].isNull()) {</span></span>
<span id="L897"><span class="lineNum">     897</span>   [<span class="tlaGBC" title="Branch 0 was taken 10 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 10 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">          10 :             start_height = request.params[0].getInt&lt;int&gt;();</span></span>
<span id="L898"><span class="lineNum">     898</span>   [<span class="tlaGBC" title="Branch 0 was taken 8 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 2 was not taken"> - </span><span class="tlaGBC" title="Branch 3 was taken 8 times"> + </span>]:<span class="tlaGNC">          10 :             if (start_height &lt; 0 || start_height &gt; tip_height) {</span></span>
<span id="L899"><span class="lineNum">     899</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :                 throw JSONRPCError(RPC_INVALID_PARAMETER, &quot;Invalid start_height&quot;);</span></span>
<span id="L900"><span class="lineNum">     900</span>                 :             :             }</span>
<span id="L901"><span class="lineNum">     901</span>                 :             :         }</span>
<span id="L902"><span class="lineNum">     902</span>                 :             : </span>
<span id="L903"><span class="lineNum">     903</span>   [<span class="tlaGBC" title="Branch 0 was taken 21 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 6 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 15 times"> + </span>]:<span class="tlaGNC">          21 :         if (!request.params[1].isNull()) {</span></span>
<span id="L904"><span class="lineNum">     904</span>   [<span class="tlaGBC" title="Branch 0 was taken 6 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 6 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">           6 :             stop_height = request.params[1].getInt&lt;int&gt;();</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 5 was taken 2 times"> + </span>]
<span id="L905"><span class="lineNum">     905</span>   [<span class="tlaGBC" title="Branch 0 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 2 was not taken"> - </span><span class="tlaGBC" title="Branch 3 was taken 4 times"> + </span>]:<span class="tlaGNC">           6 :             if (*stop_height &lt; 0 || *stop_height &gt; tip_height) {</span></span>
<span id="L906"><span class="lineNum">     906</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :                 throw JSONRPCError(RPC_INVALID_PARAMETER, &quot;Invalid stop_height&quot;);</span></span>
<span id="L907"><span class="lineNum">     907</span>         [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span>]:<span class="tlaGNC">           4 :             } else if (*stop_height &lt; start_height) {</span></span>
<span id="L908"><span class="lineNum">     908</span>   [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC">           4 :                 throw JSONRPCError(RPC_INVALID_PARAMETER, &quot;stop_height must be greater than start_height&quot;);</span></span>
<span id="L909"><span class="lineNum">     909</span>                 :             :             }</span>
<span id="L910"><span class="lineNum">     910</span>                 :             :         }</span>
<span id="L911"><span class="lineNum">     911</span>                 :             : </span>
<span id="L912"><span class="lineNum">     912</span>                 :             :         // We can't rescan beyond non-pruned blocks, stop and throw an error</span>
<span id="L913"><span class="lineNum">     913</span>   [<span class="tlaGBC" title="Branch 0 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaUNC" title="Branch 2 was not taken"> - </span><span class="tlaGBC" title="Branch 3 was taken 17 times"> + </span>]:<span class="tlaGNC">          17 :         if (!pwallet-&gt;chain().hasBlocks(pwallet-&gt;GetLastBlockHash(), start_height, stop_height)) {</span></span>
<span id="L914"><span class="lineNum">     914</span>   [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span><span class="tlaUNC" title="Branch 2 was not executed"> # </span><span class="tlaUNC" title="Branch 3 was not executed"> # </span>]:<span class="tlaUNC tlaBgUNC">           0 :             throw JSONRPCError(RPC_MISC_ERROR, &quot;Can't rescan beyond pruned data. Use RPC call getblockchaininfo to determine your pruned height.&quot;);</span></span>
<span id="L915"><span class="lineNum">     915</span>                 :             :         }</span>
<span id="L916"><span class="lineNum">     916</span>                 :             : </span>
<span id="L917"><span class="lineNum">     917</span>   [<span class="tlaGBC" title="Branch 0 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span>]:<span class="tlaGNC tlaBgGNC">          17 :         CHECK_NONFATAL(pwallet-&gt;chain().findAncestorByHeight(pwallet-&gt;GetLastBlockHash(), start_height, FoundBlock().hash(start_block)));</span></span>
<span id="L918"><span class="lineNum">     918</span>                 :<span class="tlaGNC">           8 :     }</span></span>
<span id="L919"><span class="lineNum">     919</span>                 :             : </span>
<span id="L920"><span class="lineNum">     920</span>         [<span class="tlaGBC" title="Branch 0 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          17 :     CWallet::ScanResult result =</span></span>
<span id="L921"><span class="lineNum">     921</span>         [<span class="tlaGBC" title="Branch 0 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          17 :         pwallet-&gt;ScanForWalletTransactions(start_block, start_height, stop_height, reserver, /*fUpdate=*/true, /*save_progress=*/false);</span></span>
<span id="L922"><span class="lineNum">     922</span>      [<span class="tlaUNC" title="Branch 0 was not taken"> - </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 17 times"> + </span>]:<span class="tlaGNC">          17 :     switch (result.status) {</span></span>
<span id="L923"><span class="lineNum">     923</span>                 :             :     case CWallet::ScanResult::SUCCESS:</span>
<span id="L924"><span class="lineNum">     924</span>                 :             :         break;</span>
<span id="L925"><span class="lineNum">     925</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     case CWallet::ScanResult::FAILURE:</span></span>
<span id="L926"><span class="lineNum">     926</span>   [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span><span class="tlaUNC" title="Branch 2 was not executed"> # </span><span class="tlaUNC" title="Branch 3 was not executed"> # </span>]:<span class="tlaUNC">           0 :         throw JSONRPCError(RPC_MISC_ERROR, &quot;Rescan failed. Potentially corrupted data files.&quot;);</span></span>
<span id="L927"><span class="lineNum">     927</span>                 :<span class="tlaUNC">           0 :     case CWallet::ScanResult::USER_ABORT:</span></span>
<span id="L928"><span class="lineNum">     928</span>   [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span><span class="tlaUNC" title="Branch 2 was not executed"> # </span><span class="tlaUNC" title="Branch 3 was not executed"> # </span>]:<span class="tlaUNC">           0 :         throw JSONRPCError(RPC_MISC_ERROR, &quot;Rescan aborted.&quot;);</span></span>
<span id="L929"><span class="lineNum">     929</span>                 :             :         // no default case, so the compiler can warn about missing cases</span>
<span id="L930"><span class="lineNum">     930</span>                 :             :     }</span>
<span id="L931"><span class="lineNum">     931</span>         [<span class="tlaGBC" title="Branch 0 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC tlaBgGNC">          34 :     UniValue response(UniValue::VOBJ);</span></span>
<span id="L932"><span class="lineNum">     932</span>   [<span class="tlaGBC" title="Branch 0 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">          34 :     response.pushKV(&quot;start_height&quot;, start_height);</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L933"><span class="lineNum">     933</span>   [<span class="tlaGBC" title="Branch 0 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">          34 :     response.pushKV(&quot;stop_height&quot;, result.last_scanned_height ? *result.last_scanned_height : UniValue());</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 17 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L934"><span class="lineNum">     934</span>                 :<span class="tlaGNC">          17 :     return response;</span></span>
<span id="L935"><span class="lineNum">     935</span>                 :<span class="tlaGNC">          42 : },</span></span>
<span id="L936"><span class="lineNum">     936</span>   [<span class="tlaGBC" title="Branch 0 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">       16618 :     };</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1187 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaGBC" title="Branch 12 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 14 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span><span class="tlaGBC" title="Branch 16 was taken 2374 times"> + </span><span class="tlaGBC" title="Branch 17 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 18 was not taken"> - </span> 
<span class="lineNum">        </span>             <span class="tlaUNC" title="Branch 19 was not taken"> - </span>]
<span id="L937"><span class="lineNum">     937</span>   [<span class="tlaGBC" title="Branch 0 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        9496 : }</span></span>
<span class="lineNum">        </span> <span class="tlaGBC" title="Branch 4 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span><span class="tlaGBC" title="Branch 8 was taken 1187 times"> + </span> 
<span class="lineNum">        </span> <span class="tlaUNC" title="Branch 9 was not taken"> - </span><span class="tlaGBC" title="Branch 10 was taken 1187 times"> + </span><span class="tlaUNC" title="Branch 11 was not taken"> - </span><span class="tlaUNC" title="Branch 12 was not taken"> - </span><span class="tlaUNC" title="Branch 13 was not taken"> - </span> 
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 14 was not taken"> - </span><span class="tlaUNC" title="Branch 15 was not taken"> - </span>]
<span id="L938"><span class="lineNum">     938</span>                 :             : </span>
<span id="L939"><span class="lineNum">     939</span>                 :<span class="tlaGNC">        1162 : RPCHelpMan abortrescan()</span></span>
<span id="L940"><span class="lineNum">     940</span>                 :             : {</span>
<span id="L941"><span class="lineNum">     941</span>                 :<span class="tlaGNC">        1162 :     return RPCHelpMan{&quot;abortrescan&quot;,</span></span>
<span id="L942"><span class="lineNum">     942</span>                 :             :                 &quot;\nStops current wallet rescan triggered by an RPC call, e.g. by an importprivkey call.\n&quot;</span>
<span id="L943"><span class="lineNum">     943</span>                 :             :                 &quot;Note: Use \&quot;getwalletinfo\&quot; to query the scanning progress.\n&quot;,</span>
<span id="L944"><span class="lineNum">     944</span>                 :             :                 {},</span>
<span id="L945"><span class="lineNum">     945</span>   [<span class="tlaGBC" title="Branch 0 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2324 :                 RPCResult{RPCResult::Type::BOOL, &quot;&quot;, &quot;Whether the abort was successful&quot;},</span></span>
<span class="lineNum">        </span>          <span class="tlaGBC" title="Branch 4 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span>]
<span id="L946"><span class="lineNum">     946</span>                 :<span class="tlaGNC">        1162 :                 RPCExamples{</span></span>
<span id="L947"><span class="lineNum">     947</span>                 :             :             &quot;\nImport a private key\n&quot;</span>
<span id="L948"><span class="lineNum">     948</span>   [<span class="tlaGBC" title="Branch 0 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        2324 :             + HelpExampleCli(&quot;importprivkey&quot;, &quot;\&quot;mykey\&quot;&quot;) +</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L949"><span class="lineNum">     949</span>                 :<span class="tlaGNC">        1162 :             &quot;\nAbort the running wallet rescan\n&quot;</span></span>
<span id="L950"><span class="lineNum">     950</span>   [<span class="tlaGBC" title="Branch 0 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        4648 :             + HelpExampleCli(&quot;abortrescan&quot;, &quot;&quot;) +</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L951"><span class="lineNum">     951</span>                 :<span class="tlaGNC">        1162 :             &quot;\nAs a JSON-RPC call\n&quot;</span></span>
<span id="L952"><span class="lineNum">     952</span>   [<span class="tlaGBC" title="Branch 0 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC">        4648 :             + HelpExampleRpc(&quot;abortrescan&quot;, &quot;&quot;)</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L953"><span class="lineNum">     953</span>         [<span class="tlaGBC" title="Branch 0 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">        1162 :                 },</span></span>
<span id="L954"><span class="lineNum">     954</span>                 :<span class="tlaUNC tlaBgUNC">           0 :         [&amp;](const RPCHelpMan&amp; self, const JSONRPCRequest&amp; request) -&gt; UniValue</span></span>
<span id="L955"><span class="lineNum">     955</span>                 :             : {</span>
<span id="L956"><span class="lineNum">     956</span>                 :<span class="tlaUNC">           0 :     std::shared_ptr&lt;CWallet&gt; const pwallet = GetWalletForJSONRPCRequest(request);</span></span>
<span id="L957"><span class="lineNum">     957</span>         [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span>]:<span class="tlaUNC">           0 :     if (!pwallet) return UniValue::VNULL;</span></span>
<span id="L958"><span class="lineNum">     958</span>                 :             : </span>
<span id="L959"><span class="lineNum">     959</span>   [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span><span class="tlaUNC" title="Branch 2 was not executed"> # </span><span class="tlaUNC" title="Branch 3 was not executed"> # </span> :<span class="tlaUNC">           0 :     if (!pwallet-&gt;IsScanning() || pwallet-&gt;IsAbortingRescan()) return false;</span></span>
<span class="lineNum">        </span>          <span class="tlaUNC" title="Branch 4 was not executed"> # </span><span class="tlaUNC" title="Branch 5 was not executed"> # </span>]
<span id="L960"><span class="lineNum">     960</span>         [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span>]:<span class="tlaUNC">           0 :     pwallet-&gt;AbortRescan();</span></span>
<span id="L961"><span class="lineNum">     961</span>         [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span>]:<span class="tlaUNC">           0 :     return true;</span></span>
<span id="L962"><span class="lineNum">     962</span>                 :<span class="tlaUNC">           0 : },</span></span>
<span id="L963"><span class="lineNum">     963</span>   [<span class="tlaGBC" title="Branch 0 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 3 was not taken"> - </span> :<span class="tlaGNC tlaBgGNC">        6972 :     };</span></span>
<span class="lineNum">        </span>    <span class="tlaGBC" title="Branch 4 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 5 was not taken"> - </span><span class="tlaGBC" title="Branch 6 was taken 1162 times"> + </span><span class="tlaUNC" title="Branch 7 was not taken"> - </span>]
<span id="L964"><span class="lineNum">     964</span>                 :             : }</span>
<span id="L965"><span class="lineNum">     965</span>                 :             : } // namespace wallet</span>
        </pre>
              </td>
            </tr>
          </table>
          <br>

          <table width="100%" border=0 cellspacing=0 cellpadding=0>
            <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
            <tr><td class="versionInfo">Generated by: <a href="https://github.com//linux-test-project/lcov" target="_parent">LCOV version 2.0-1</a></td></tr>
          </table>
          <br>

</body>
</html>
